# Buffer

 `Buffer` 对象用于表示固定长度的字节序列。 许多 Node.js API 都支持 `Buffer`。 

`Buffer` 类是 JavaScript [`Uint8Array`](http://url.nodejs.cn/ZbDkpm) 类的子类，并使用涵盖额外用例的方法对其进行扩展。 Node.js API 在支持 `Buffer` 的地方也接受普通的 [`Uint8Array`](http://url.nodejs.cn/ZbDkpm)。

虽然 `Buffer` 类在全局作用域内可用，但仍然建议通过 import 或 require 语句显式地引用它。



上面是官方解释：

在我的理解看来：js中处理数据都是已字符串的形式，对于二进制的数据不便于处理，所以才有了buffer，buffer是可以直接操作二进制的。他是一个全局的变量，有诸多方法对二进制进行操作。



## 什么是base64？

Base64 编码是一种将数据（通常是二进制）转换为 ASCII 字符集的方法,Base64 因为能够起到隐藏数据的效果而常常被误认为是一种加密技术。
值得强调的是， Base64 不是一种加密或压缩技术。实际上，Base64 编码信息的大小是原始数据实际大小的 1.3333 倍。

> 理解：假设我们有 6 个 ASCII 字符，那么二进制数据就是 6 * 8 = 48（位）。如果使用 Base64 编码的话，那么就会分成 48 / 6 = 8(组)，每一组就会对应一个 ASCII 字符，也即是说，经过 Base64 编码后，我们会有 8 个 ASCII 字符。因为数据传输的时候都会被转换为电信号（虽然你看到的是字符），所以数据的大小都是按位来算的，8 个 ASCII 字符就是 8 * 8 = 64（位），64 / 48 = 4 / 3 ≈ 1.3333 。 综上所述，Base64 编码信息的大小是原始数据实际大小的 1.3333 倍。
>

### base64d的转化原理

将数据转换为 base64 是一个多步骤的过程。以下是它对文本字符串的工作方式：

#### 对文本字符串的工作方式：
参考图 

![](https://cdnforspeed.oss-cn-beijing.aliyuncs.com/Img/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/20220611171833.png)

假设我们有一个字符串是 `cxy`,我们要讲他转为base64需要先在ascll编码表内找到对应的

    c字符对比ascll编码表的编码是99，99转为二进制是1100011
    x字符对比ascll编码表的编码是120，120转为二进制是1111000
    y字符对比ascll编码表的编码是121，121转为二进制是1111001

合起来就是 1100011 1111000 1111001 但是对于每组不满8位要在前面进行补0操作

补起来就是 01100011 01111000 01111001 原本7个bit变成8个，这就是base64编码后的会比原来的大大约3分之一的原因。

然后对上面的三组数据进行重组(6位一组)：011000 110111 100001 111001 然后对此转成为二进制分别为:  24 55 33 57  

在base64编码表内对应的字符就是 `Y3h5`



**对于位数不足的情况要补0**

参考图

![](https://cdnforspeed.oss-cn-beijing.aliyuncs.com/Img/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/20220611171847.png)

如我只有2个字符  `xy`

```
x字符对比ascll编码表的编码是120，120转为二进制是1111000,补0为01111000
y字符对比ascll编码表的编码是121，121转为二进制是1111001,补0为01111001
第三个字符是空的，直接放空
```

按6位一组划分 `011110` `000111` `1001` 发现第三组不满6位 直接补两个0 为 `011110 ` `000111 ` `100100 `转为十进制为
30、7、36 在base64编码表内对应的字符就是 eHk,但是由于第三个字符是空的没有做进制转化，到分配第四组的时候是空的，直接补=
所以得到的结果就是 `eHk=`

## 附表1:ascll编码表

![](https://cdnforspeed.oss-cn-beijing.aliyuncs.com/Img/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/20220611173355.jpg)

## 附表2:bask64编码表

![](https://cdnforspeed.oss-cn-beijing.aliyuncs.com/Img/%E4%B8%AA%E4%BA%BA%E7%AC%94%E8%AE%B0%E5%9B%BE%E7%89%87/20220611172255.png)

## 在线工具

[进制互转](https://tool.oschina.net/hexconvert)

[base64互转](https://www.zxgj.cn/tag?tag=base64)

在这里总结一个坑

上传文件传到后端 如果是base64的话。记得要把base64的前缀去掉，

## 杂

### buffer转string

buffer数据对象.toString()

