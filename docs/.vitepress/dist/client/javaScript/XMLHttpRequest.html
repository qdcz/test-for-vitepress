<!DOCTYPE html>
<html lang="en-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>æ¦‚å¿µ | æ¾œæ¼¾</title>
    <meta name="description" content="å¹¿å¤©ä¸‹ä¹‹å¹¿,æ·±å¤©ä¸‹ä¹‹æ·±">
    <link rel="stylesheet" href="/assets/style.49f07aca.css">
    <link rel="modulepreload" href="/assets/Home.b9b6273f.js">
    <link rel="modulepreload" href="/assets/app.1760f824.js">
    <link rel="modulepreload" href="/assets/client_javaScript_XMLHttpRequest.md.6f49cf58.lean.js">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="æ¾œæ¼¾">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
  <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
  <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
  <meta name="twitter:title" content="æ¦‚å¿µ | æ¾œæ¼¾">
  <meta property="og:title" content="æ¦‚å¿µ | æ¾œæ¼¾">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-d186b2c2><div class="sidebar-button" data-v-d186b2c2><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="æ¾œæ¼¾, back to home" data-v-d186b2c2 data-v-34a93bc8><img class="logo" src="/logo2.jpg" alt="Logo" data-v-34a93bc8> æ¾œæ¼¾</a><div class="flex-grow" data-v-d186b2c2></div><div class="nav" data-v-d186b2c2><nav class="nav-links" data-v-d186b2c2 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>windowSkills <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linuxSkills <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-7e9d9da8><nav class="nav-links nav" data-v-7e9d9da8 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>windowSkills <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linuxSkills <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-7e9d9da8><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#æ¦‚å¿µ">æ¦‚å¿µ</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä½¿ç”¨">ä½¿ç”¨</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ç›‘å¬äº‹ä»¶">ç›‘å¬äº‹ä»¶</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#readystatechange">readystatechange</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#abort">abort</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#error">error</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#load">load</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#loadstart">loadstart</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#progress">progress</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#timeout">timeout</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#å±æ€§">å±æ€§</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#readystate-åªè¯»">readyState[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#response-åªè¯»">response[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#responsetext-åªè¯»">responseText[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#responsetype">responseType</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#responseurl-åªè¯»">responseURL[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#status-åªè¯»">status[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#statustext-åªè¯»">statusText[åªè¯»]</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#timeout-1">timeout</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#withcredentials">withCredentials</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ–¹æ³•">æ–¹æ³•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#abort-1">.abort()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getallresponseheaders">.getAllResponseHeaders()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#getresponseheader-name">.getResponseHeader(name)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#open">.open()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#overridemimetype-mimetype">.overrideMimeType(mimeType)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#send-body">.send(body)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#setrequestheader">.setRequestHeader()</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-f058c2ee><div class="container" data-v-f058c2ee><!--[--><!--]--><div style="position:relative;" class="content" data-v-f058c2ee><div><h2 id="æ¦‚å¿µ" tabindex="-1">æ¦‚å¿µ</h2><p>XMLHttpRequest æ˜¯ä¸€ç§åˆ›å»ºajaxè¯·æ±‚çš„JavaScriptApi æä¾›æ¸¸è§ˆå™¨ä¸æœåŠ¡å™¨ä¹‹é—´çš„å‘é€è¯·æ±‚çš„èƒ½åŠ›</p><h2 id="ä½¿ç”¨" tabindex="-1">ä½¿ç”¨</h2><div class="language-js"><pre><code><span class="token keyword">const</span> ajax <span class="token operator">=</span> <span class="token punctuation">(</span>url<span class="token punctuation">,</span> param<span class="token punctuation">,</span> option <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&quot;get&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">var</span> data <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText		<span class="token comment">// æ¥æ”¶å“åº”ä¿¡æ¯</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// ä¼ è¾“å¤±è´¥</span>
        xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>option<span class="token punctuation">.</span>type<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&#39;Content-type&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;application/json; charset=utf-8&#39;</span><span class="token punctuation">)</span>
        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>param<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="ç›‘å¬äº‹ä»¶" tabindex="-1">ç›‘å¬äº‹ä»¶</h2><h3 id="readystatechange" tabindex="-1">readystatechange</h3><p>å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;readystatechange&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onreadystatechange</code> å±æ€§ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> data <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText		<span class="token comment">// æ¥æ”¶å“åº”ä¿¡æ¯</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="abort" tabindex="-1">abort</h3><p>å½“ request è¢«åœæ­¢æ—¶è§¦å‘ï¼Œä¾‹å¦‚å½“ç¨‹åºè°ƒç”¨</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;abort&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onabort</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onabort</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;** è¯·æ±‚è¢«ä¸­æ­¢&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//..</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™å°†ä¼šè°ƒç”¨æˆ‘ä»¬ä¸Šé¢å®šä¹‰çš„ onabort å›è°ƒå‡½æ•°</span>
</code></pre></div><h3 id="error" tabindex="-1">error</h3><p>å½“ request é­é‡é”™è¯¯æ—¶è§¦å‘ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;error&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onerror</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;** An error occurred during the transaction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="load" tabindex="-1">load</h3><p>å½“è¯·æ±‚ç»“æŸæ—¶è§¦å‘, æ— è®ºè¯·æ±‚æˆåŠŸæˆ–è€…å¤±è´¥</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;load&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onload</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;** &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="loadstart" tabindex="-1">loadstart</h3><p>æ¥æ”¶åˆ°å“åº”æ•°æ®æ—¶è§¦å‘ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;loadstart&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onloadstart</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onloadstart</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Download underway&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="progress" tabindex="-1">progress</h3><p>å½“è¯·æ±‚æ¥æ”¶åˆ°æ›´å¤šæ•°æ®æ—¶ï¼Œå‘¨æœŸæ€§åœ°è§¦å‘ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;progress&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>onprogress</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="timeout" tabindex="-1">timeout</h3><p>åœ¨é¢„è®¾æ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°å“åº”æ—¶è§¦å‘ã€‚ è¯·æ±‚è¶…æ—¶å›è°ƒã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;timeout&#39;</span><span class="token punctuation">,</span> handleEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>ontimeout</code> å±æ€§ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xmlhttp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  method <span class="token operator">=</span> <span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span>
  url <span class="token operator">=</span> <span class="token string">&#39;https://developer.mozilla.org/&#39;</span><span class="token punctuation">;</span>

xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å±æ€§" tabindex="-1">å±æ€§</h2><h3 id="readystate-åªè¯»" tabindex="-1">readyState[<code>åªè¯»</code>]</h3><table><thead><tr><th style="text-align:center;">å€¼</th><th style="text-align:center;">çŠ¶æ€</th><th>æè¿°</th></tr></thead><tbody><tr><td style="text-align:center;"><code>0</code></td><td style="text-align:center;"><code>UNSENT</code></td><td>ä»£ç†è¢«åˆ›å»ºï¼Œä½†å°šæœªè°ƒç”¨ open() æ–¹æ³•ã€‚</td></tr><tr><td style="text-align:center;"><code>1</code></td><td style="text-align:center;"><code>OPENED</code></td><td><code>open()</code> æ–¹æ³•å·²ç»è¢«è°ƒç”¨ã€‚</td></tr><tr><td style="text-align:center;"><code>2</code></td><td style="text-align:center;"><code>HEADERS_RECEIVED</code></td><td><code>send()</code> æ–¹æ³•å·²ç»è¢«è°ƒç”¨ï¼Œå¹¶ä¸”å¤´éƒ¨å’ŒçŠ¶æ€å·²ç»å¯è·å¾—ã€‚</td></tr><tr><td style="text-align:center;"><code>3</code></td><td style="text-align:center;"><code>LOADING</code></td><td>ä¸‹è½½ä¸­ï¼› <code>responseText</code> å±æ€§å·²ç»åŒ…å«éƒ¨åˆ†æ•°æ®ã€‚</td></tr><tr><td style="text-align:center;"><code>4</code></td><td style="text-align:center;"><code>DONE</code></td><td>ä¸‹è½½æ“ä½œå·²å®Œæˆã€‚</td></tr></tbody></table><h3 id="response-åªè¯»" tabindex="-1">response[<code>åªè¯»</code>]</h3><p>å“åº”çš„æ­£æ–‡</p><div class="language-js"><pre><code><span class="token keyword">var</span> data <span class="token operator">=</span> xhr<span class="token punctuation">.</span>response		<span class="token comment">// æ¥æ”¶å“åº”ä¿¡æ¯</span>
</code></pre></div><h3 id="responsetext-åªè¯»" tabindex="-1">responseText[<code>åªè¯»</code>]</h3><p>åœ¨ä¸€ä¸ªè¯·æ±‚è¢«å‘é€åï¼Œä»æœåŠ¡å™¨ç«¯è¿”å›æ–‡æœ¬ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> data <span class="token operator">=</span> xhr<span class="token punctuation">.</span>responseText		<span class="token comment">// æ¥æ”¶å“åº”ä¿¡æ¯</span>
</code></pre></div><h3 id="responsetype" tabindex="-1">responseType</h3><p>å“åº”æ•°æ®ä¸­åŒ…å«çš„æ•°æ®ç±»å‹</p><p>ç±»å‹æœ‰ï¼š &quot;&quot; ã€ &quot;arraybuffer&quot; ã€ &quot;blob&quot; ã€ &quot;document&quot; ã€ &quot;json&quot; ã€ &quot;text&quot; ã€ &quot;ms-stream&quot;</p><div class="language-js"><pre><code><span class="token keyword">var</span> type <span class="token operator">=</span> xhr<span class="token punctuation">.</span>type	
</code></pre></div><h3 id="responseurl-åªè¯»" tabindex="-1">responseURL[<code>åªè¯»</code>]</h3><p>å“åº”çš„åºåˆ—åŒ–URLï¼Œå¦‚æœURLä¸ºç©ºåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœURLæœ‰é”šç‚¹ï¼Œåˆ™ä½äºURL # åé¢çš„å†…å®¹ä¼šè¢«åˆ é™¤ã€‚å¦‚æœURLæœ‰é‡å®šå‘ï¼Œ <code>responseURL</code> çš„å€¼ä¼šæ˜¯ç»è¿‡å¤šæ¬¡é‡å®šå‘åçš„æœ€ç»ˆ URL ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/test&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseURL<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// http://example.com/test</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="status-åªè¯»" tabindex="-1">status[<code>åªè¯»</code>]</h3><p>è¿”å›äº†<code>XMLHttpRequest</code> å“åº”ä¸­çš„æ•°å­—çŠ¶æ€ç ã€‚<code>status</code> çš„å€¼æ˜¯ä¸€ä¸ª<code>æ— ç¬¦å·çŸ­æ•´å‹</code>ã€‚åœ¨è¯·æ±‚å®Œæˆå‰ï¼Œ<code>status</code>çš„å€¼ä¸º<code>0</code>ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœ XMLHttpRequest å‡ºé”™ï¼Œæµè§ˆå™¨è¿”å›çš„ status ä¹Ÿä¸º0ã€‚</p><blockquote><p>statusç æ˜¯æ ‡å‡†çš„<a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">HTTP status codes</a></p></blockquote><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;UNSENT&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;OPENED&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;LOADING&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;DONE&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * è¾“å‡ºå¦‚ä¸‹ï¼š
 *
 * UNSENTï¼ˆæœªå‘é€ï¼‰ 0
 * OPENEDï¼ˆå·²æ‰“å¼€ï¼‰ 0
 * LOADINGï¼ˆè½½å…¥ä¸­ï¼‰ 200
 * DONEï¼ˆå®Œæˆï¼‰ 200
 */</span>

</code></pre></div><h3 id="statustext-åªè¯»" tabindex="-1">statusText[<code>åªè¯»</code>]</h3><p>è¿”å›äº†<code>XMLHttpRequest</code> è¯·æ±‚ä¸­ç”±æœåŠ¡å™¨è¿”å›çš„ä¸€ä¸ª<a href="https://developer.mozilla.org/en-US/docs/Web/API/DOMString" target="_blank" rel="noopener noreferrer"><code>DOMString</code></a> ç±»å‹çš„æ–‡æœ¬ä¿¡æ¯ï¼Œè¿™åˆ™ä¿¡æ¯ä¸­ä¹ŸåŒ…å«äº†å“åº”çš„æ•°å­—çŠ¶æ€ç ã€‚ä¸åŒäºä½¿ç”¨ä¸€ä¸ªæ•°å­—æ¥æŒ‡ç¤ºçš„çŠ¶æ€ç <code>XMLHTTPRequest.status</code>ï¼Œè¿™ä¸ªå±æ€§åŒ…å«äº†è¿”å›çŠ¶æ€å¯¹åº”çš„æ–‡æœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚&quot;OK&quot;æˆ–æ˜¯&quot;Not Found&quot;ã€‚å¦‚æœè¯·æ±‚çš„çŠ¶æ€<code>readyState</code>çš„å€¼ä¸º&quot;UNSENT&quot;æˆ–è€…&quot;OPENED&quot;ï¼Œåˆ™è¿™ä¸ªå±æ€§çš„å€¼å°†ä¼šæ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ã€‚</p><p>å¦‚æœæœåŠ¡å™¨æœªæ˜ç¡®æŒ‡å®šä¸€ä¸ªçŠ¶æ€æ–‡æœ¬ä¿¡æ¯ï¼Œåˆ™<code>statusText</code>çš„å€¼å°†ä¼šè¢«è‡ªåŠ¨èµ‹å€¼ä¸º&quot;OK&quot;ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;0 UNSENT&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;1 OPENED&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3 LOADING&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;4 DONE&#39;</span><span class="token punctuation">,</span> xhr<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * è¾“å‡ºå¦‚ä¸‹:
 *
 * 0 UNSENT
 * 1 OPENED
 * 3 LOADING OK
 * 4 DONE OK
 */</span>
</code></pre></div><h3 id="timeout-1" tabindex="-1">timeout</h3><p>æ˜¯ä¸€ä¸ªæ— ç¬¦å·é•¿æ•´å‹æ•°ï¼Œä»£è¡¨ç€ä¸€ä¸ªè¯·æ±‚åœ¨è¢«è‡ªåŠ¨ç»ˆæ­¢å‰æ‰€æ¶ˆè€—çš„æ¯«ç§’æ•°ã€‚é»˜è®¤å€¼ä¸º 0ï¼Œæ„å‘³ç€æ²¡æœ‰è¶…æ—¶ã€‚è¶…æ—¶å¹¶ä¸åº”è¯¥ç”¨åœ¨ä¸€ä¸ª <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/document_environment" target="_blank" rel="noopener noreferrer">document environment</a> ä¸­çš„åŒæ­¥ XMLHttpRequests è¯·æ±‚ä¸­ï¼Œå¦åˆ™å°†ä¼šæŠ›å‡ºä¸€ä¸ª <code>InvalidAccessError</code> ç±»å‹çš„é”™è¯¯ã€‚å½“è¶…æ—¶å‘ç”Ÿï¼Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/timeout_event" target="_blank" rel="noopener noreferrer">timeout</a> äº‹ä»¶å°†ä¼šè¢«è§¦å‘ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">2000</span><span class="token punctuation">;</span> <span class="token comment">// è¶…æ—¶æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// è¯·æ±‚å®Œæˆã€‚åœ¨æ­¤è¿›è¡Œå¤„ç†ã€‚</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// XMLHttpRequest è¶…æ—¶ã€‚åœ¨æ­¤åšæŸäº‹ã€‚</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="withcredentials" tabindex="-1">withCredentials</h3><p>æŒ‡ç¤ºäº†æ˜¯å¦è¯¥ä½¿ç”¨ç±»ä¼¼cookies,authorization headers(å¤´éƒ¨æˆæƒ)æˆ–è€…TLSå®¢æˆ·ç«¯è¯ä¹¦è¿™ä¸€ç±»èµ„æ ¼è¯ä¹¦æ¥åˆ›å»ºä¸€ä¸ªè·¨ç«™ç‚¹è®¿é—®æ§åˆ¶ï¼ˆcross-site <code>Access-Control</code>ï¼‰è¯·æ±‚ã€‚åœ¨åŒä¸€ä¸ªç«™ç‚¹ä¸‹ä½¿ç”¨<code>withCredentialså±æ€§æ˜¯æ— æ•ˆçš„ã€‚</code></p><blockquote><p>ä¸åŒæºè¯·æ±‚è¦è‡ªåŠ¨æºå¸¦cookieï¼Œå°†æ­¤å€¼è®¾ç½®ä¸ºtrue</p></blockquote><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;http://example.com/&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span>withCredentials <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ–¹æ³•" tabindex="-1">æ–¹æ³•</h2><h3 id="abort-1" tabindex="-1">.abort()</h3><p>ç»ˆæ­¢è¯¥è¯·æ±‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    method <span class="token operator">=</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
    url <span class="token operator">=</span> <span class="token string">&quot;https://developer.mozilla.org/&quot;</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">OH_NOES_WE_NEED_TO_CANCEL_RIGHT_NOW_OR_ELSE</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  xhr<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="getallresponseheaders" tabindex="-1">.getAllResponseHeaders()</h3><p>ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å›æ‰€æœ‰ç”¨ <a href="https://developer.mozilla.org/zh-CN/docs/Glossary/CRLF" target="_blank" rel="noopener noreferrer">CRLF</a> åˆ†éš”çš„å“åº”å¤´ï¼Œå¦‚æœæ²¡æœ‰æ”¶åˆ°å“åº”ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</p><div class="language-js"><pre><code>xhr<span class="token punctuation">.</span><span class="token function">getAllResponseHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>è¿”å›ç¤ºä¾‹</p><div class="language-http"><pre><code><span class="token header"><span class="token header-name keyword">date</span><span class="token punctuation">:</span> <span class="token header-value">Fri, 08 Dec 2017 21:04:30 GMT\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-encoding</span><span class="token punctuation">:</span> <span class="token header-value">gzip\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-content-type-options</span><span class="token punctuation">:</span> <span class="token header-value">nosniff\r\n</span></span>
<span class="token header"><span class="token header-name keyword">server</span><span class="token punctuation">:</span> <span class="token header-value">meinheld/0.6.1\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-frame-options</span><span class="token punctuation">:</span> <span class="token header-value">DENY\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-type</span><span class="token punctuation">:</span> <span class="token header-value">text/html; charset=utf-8\r\n</span></span>
<span class="token header"><span class="token header-name keyword">connection</span><span class="token punctuation">:</span> <span class="token header-value">keep-alive\r\n</span></span>
<span class="token header"><span class="token header-name keyword">strict-transport-security</span><span class="token punctuation">:</span> <span class="token header-value hsts languages-hsts">max-age=63072000\r\n</span></span>
<span class="token header"><span class="token header-name keyword">vary</span><span class="token punctuation">:</span> <span class="token header-value">Cookie, Accept-Encoding\r\n</span></span>
<span class="token header"><span class="token header-name keyword">content-length</span><span class="token punctuation">:</span> <span class="token header-value">6502\r\n</span></span>
<span class="token header"><span class="token header-name keyword">x-xss-protection</span><span class="token punctuation">:</span> <span class="token header-value">1; mode=block\r\n</span></span>
</code></pre></div><h3 id="getresponseheader-name" tabindex="-1">.getResponseHeader(name)</h3><p>è¿”å›åŒ…å«æŒ‡å®šå“åº”å¤´çš„å­—ç¬¦ä¸²ï¼Œå¦‚æœå“åº”å°šæœªæ”¶åˆ°æˆ–å“åº”ä¸­ä¸å­˜åœ¨è¯¥æŠ¥å¤´ï¼Œåˆ™è¿”å› <code>null</code>ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;somefile.txt&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
client<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">HEADERS_RECEIVED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//å¦‚æœreadyStateè¡¨ç¤ºå“åº”å¤´å·²è¿”å›</span>
    <span class="token keyword">var</span> contentType<span class="token operator">=</span>client<span class="token punctuation">.</span><span class="token function">getResponseHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å°†æ­¤è¿æ¥çš„Content-Typeå“åº”å¤´é¡¹èµ‹å€¼åˆ°contentTypeã€‚</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>contentType <span class="token operator">!=</span> my_expected_type<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//å¦‚æœè¿™ä¸æ˜¯ä½ çš„é¢„æœŸå€¼</span>
      client<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ç»ˆæ­¢è¿æ¥</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="open" tabindex="-1">.open()</h3><p>åˆå§‹åŒ–ä¸€ä¸ªè¯·æ±‚ã€‚</p><div class="language-js"><pre><code>xhrReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhrReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhrReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">,</span> user<span class="token punctuation">)</span><span class="token punctuation">;</span>
xhrReq<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">,</span> async<span class="token punctuation">,</span> user<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>asyncï¼šæ˜¯å¦å¼‚æ­¥ userï¼šç”¨æˆ·åç”¨äºè®¤è¯ç”¨é€”ï¼›é»˜è®¤ä¸ºnullã€‚ passwordï¼šå¯†ç ç”¨äºè®¤è¯ç”¨é€”ï¼›é»˜è®¤ä¸ºnullã€‚</p><h3 id="overridemimetype-mimetype" tabindex="-1">.overrideMimeType(mimeType)</h3><p>è¦†å†™ç”±æœåŠ¡å™¨è¿”å›çš„ MIME ç±»å‹ã€‚</p><p><code>mimeType</code> : ä¸€ä¸ª <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/DOMString" target="_blank" rel="noopener noreferrer"><code>DOMString</code></a> æŒ‡å®šå…·ä½“çš„MIMEç±»å‹å»ä»£æ›¿æœ‰æœåŠ¡å™¨æŒ‡å®šçš„MIMEç±»å‹. å¦‚æœæœåŠ¡å™¨æ²¡æœ‰æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆ <code>XMLHttpRequest</code> å°†ä¼šé»˜è®¤ä¸º <code>&quot;text/xml&quot;</code>.</p><div class="language-js"><pre><code>req <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">overrideMimeType</span><span class="token punctuation">(</span><span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;load&quot;</span><span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
req<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="send-body" tabindex="-1">.send(body)</h3><p>ç”¨äºå‘é€ HTTP è¯·æ±‚ã€‚å¦‚æœæ˜¯å¼‚æ­¥è¯·æ±‚ï¼ˆé»˜è®¤ä¸ºå¼‚æ­¥è¯·æ±‚ï¼‰ï¼Œåˆ™æ­¤æ–¹æ³•ä¼šåœ¨è¯·æ±‚å‘é€åç«‹å³è¿”å›ï¼›å¦‚æœæ˜¯åŒæ­¥è¯·æ±‚ï¼Œåˆ™æ­¤æ–¹æ³•ç›´åˆ°å“åº”åˆ°è¾¾åæ‰ä¼šè¿”å›ã€‚</p><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">// è¯·æ±‚ç»“æŸå,åœ¨æ­¤å¤„å†™å¤„ç†ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// xhr.send(&#39;string&#39;);</span>
<span class="token comment">// xhr.send(new Blob());</span>
<span class="token comment">// xhr.send(new Int8Array());</span>
<span class="token comment">// xhr.send(document);</span>
</code></pre></div><div class="language-js"><pre><code><span class="token keyword">var</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;/server&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//å‘é€åˆé€‚çš„è¯·æ±‚å¤´ä¿¡æ¯</span>
xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¯·æ±‚ç»“æŸå,åœ¨æ­¤å¤„å†™å¤„ç†ä»£ç </span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;foo=bar&amp;lorem=ipsum&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// xhr.send(&#39;string&#39;);</span>
<span class="token comment">// xhr.send(new Blob());</span>
<span class="token comment">// xhr.send(new Int8Array());</span>
<span class="token comment">// xhr.send(document);</span>
</code></pre></div><h3 id="setrequestheader" tabindex="-1">.setRequestHeader()</h3><p>è®¾ç½®HTTPè¯·æ±‚å¤´éƒ¨çš„æ–¹æ³•</p><p>æ­¤æ–¹æ³•å¿…é¡»åœ¨ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/open" target="_blank" rel="noopener noreferrer"><code>open()</code></a> æ–¹æ³•å’Œ <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/XMLHttpRequest/send" target="_blank" rel="noopener noreferrer"><code>send()</code></a> ä¹‹é—´è°ƒç”¨ã€‚å¦‚æœå¤šæ¬¡å¯¹åŒä¸€ä¸ªè¯·æ±‚å¤´èµ‹å€¼ï¼Œåªä¼šç”Ÿæˆä¸€ä¸ªåˆå¹¶äº†å¤šä¸ªå€¼çš„è¯·æ±‚å¤´ã€‚</p><p>myReq.setRequestHeader(header, value);</p><p><code>header</code> : å±æ€§çš„å€¼ã€‚</p><p><code>value</code> : å±æ€§çš„å€¼ã€‚</p></div></div><footer class="page-footer" data-v-f058c2ee data-v-4d1950e8><div class="edit" data-v-4d1950e8><div class="edit-link" data-v-4d1950e8 data-v-d1f281aa><!----></div></div><div class="updated" data-v-4d1950e8><p class="last-updated" data-v-4d1950e8 data-v-01ad1c9a><span class="prefix" data-v-01ad1c9a>æœ€è¿‘æ›´æ–°æ—¶é—´:</span><span class="datetime" data-v-01ad1c9a></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ideshortcutkey_webstorm.md\":\"19c4ae71\",\"about_index.md\":\"be45de70\",\"client_electron_base.md\":\"1d881de0\",\"client_electron_index.md\":\"c432582b\",\"client_typescript_index.md\":\"ff455ba9\",\"client_css_æ»šåŠ¨æ¡.md\":\"58516aa0\",\"client_javascript_xmlhttprequest.md\":\"6f49cf58\",\"client_javascript_base.md\":\"cd88cb16\",\"client_javascript_index.md\":\"1e16a282\",\"client_javascript_å‡½æ•°.md\":\"0959e7ca\",\"concat_index.md\":\"8ba38e07\",\"environmentconstruction_index.md\":\"83171eeb\",\"environmentconstruction_linux.md\":\"d87ef34b\",\"environmentconstruction_mongodbç¦»çº¿å®‰è£….md\":\"d53b145c\",\"environmentconstruction_mysqlç¦»çº¿å®‰è£….md\":\"9526a905\",\"environmentconstruction_nginx.md\":\"a5bbc935\",\"environmentconstruction_redisç¦»çº¿å®‰è£….md\":\"cff6f538\",\"home_home.md\":\"bdda725b\",\"index.md\":\"999f742a\",\"interest_drug_index.md\":\"1209e85f\",\"interest_music_index.md\":\"625298a8\",\"npmpackage_index.md\":\"690a873d\",\"npmpackage_log4js.md\":\"8c2ee6a3\",\"qdcz-note.md\":\"01ac23f3\",\"service_linux_index.md\":\"b50fb82d\",\"service_linux_linux.md\":\"8351125d\",\"service_linux_å­˜å‚¨å•ä½.md\":\"e6f14abf\",\"service_mongodb_base.md\":\"c72e94f2\",\"service_mongodb_index.md\":\"07dce089\",\"service_mongodb_å»ºç«‹ttlç´¢å¼•.md\":\"96872d71\",\"service_nginx_index.md\":\"fb582ecc\",\"service_nginx_windowç‰ˆæœ¬.md\":\"1ae79a1d\",\"service_nodejs_base.md\":\"f724d3c1\",\"service_nodejs_buffer.md\":\"773c745e\",\"service_nodejs_index.md\":\"1e9b9708\",\"service_nodejs_process.md\":\"8f521494\",\"service_nodejs_stream.md\":\"4c62e57a\",\"service_nodejs_å·¥å…·å‡½æ•°.md\":\"9e14031f\",\"service_nodejs_æ–‡ä»¶æè¿°ç¬¦.md\":\"e4a5e3d5\",\"service_nodejs_æ—¥å¿—ç³»ç»Ÿè®°å½•.md\":\"b0edc299\",\"service_nodejs_æ··æ·†ç¼–è¯‘æ‰“åŒ….md\":\"045edeb3\",\"service_nodejs_é”.md\":\"cc245d7c\",\"softwareengineering_é¢å‘å¯¹è±¡ç¼–ç¨‹.md\":\"676219dd\",\"temporary_index.md\":\"86377c67\",\"temporary_recentplan.md\":\"4f39be33\",\"temporary_websocketforauthbynodejs.md\":\"914ee2ad\",\"temporary_work_day_work_report.md\":\"51ddcd7c\",\"temporary_work_todayplan.md\":\"f76512b0\",\"temporary_work_weekly_work_report.md\":\"8582985c\",\"windowsystem_index.md\":\"e3b3cf52\",\"windowsystem_åˆ›å»ºæœ¬åœ°å…±äº«æ–‡ä»¶å¤¹.md\":\"3c3fdf2d\"}")</script>
    <script type="module" async src="/assets/app.1760f824.js"></script>
    
  </body>
</html>