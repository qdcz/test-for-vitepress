<!DOCTYPE html>
<html lang="en-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è¿›ç¨‹ | æ¾œæ¼¾</title>
    <meta name="description" content="å¹¿å¤©ä¸‹ä¹‹å¹¿,æ·±å¤©ä¸‹ä¹‹æ·±">
    <link rel="stylesheet" href="/assets/style.49f07aca.css">
    <link rel="modulepreload" href="/assets/Home.a35a742d.js">
    <link rel="modulepreload" href="/assets/app.71728ad2.js">
    <link rel="modulepreload" href="/assets/service_NodeJs_process.md.5f87cb8c.lean.js">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="æ¾œæ¼¾">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
  <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
  <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
  <meta name="twitter:title" content="è¿›ç¨‹ | æ¾œæ¼¾">
  <meta property="og:title" content="è¿›ç¨‹ | æ¾œæ¼¾">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-d186b2c2><div class="sidebar-button" data-v-d186b2c2><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="æ¾œæ¼¾, back to home" data-v-d186b2c2 data-v-34a93bc8><img class="logo" src="/logo2.jpg" alt="Logo" data-v-34a93bc8> æ¾œæ¼¾</a><div class="flex-grow" data-v-d186b2c2></div><div class="nav" data-v-d186b2c2><nav class="nav-links" data-v-d186b2c2 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/go/study/index" data-v-711da5ba>å­¦ä¹ goçš„ç»å† <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>window <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linux <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-7e9d9da8><nav class="nav-links nav" data-v-7e9d9da8 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/go/study/index" data-v-711da5ba>å­¦ä¹ goçš„ç»å† <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>window <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linux <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-7e9d9da8><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#å±æ€§">å±æ€§</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#execargv">.execArgv</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#allowednodeenvironmentflags">.allowedNodeEnvironmentFlags</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#arch">.arch</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#argv">.argv</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#channel">.channel</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#config">.config</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#connected">.connected</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#debugport">.debugPort</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ–¹æ³•">æ–¹æ³•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#cwd">.cwd()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stdin">. stdin</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stdout">.stdout.</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#stderr">.stderr.</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#memoryusage">.memoryUsage()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#memoryusage-rss">.memoryUsage.rss()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#channel-ref">.channel.ref()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#channel-unref">.channel.unref()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#chdir-directory">.chdir(directory)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#abort">.abort()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#argv0">.argv0()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#cpuusage-previousvalue">.cpuUsage([previousValue])</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#äº‹ä»¶">äº‹ä»¶</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#exit">exit</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#beforeexit">beforeExit</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#disconnect">disconnect</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#message">message</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#rejectionhandled">rejectionHandled</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uncaughtexceptionï¼ˆæœªï¼‰">uncaughtExceptionï¼ˆæœªï¼‰</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#uncaughtexceptionmonitor">uncaughtExceptionMonitor</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#unhandledrejection">unhandledRejection</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#warning">warning</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#worker">worker</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#ä¿¡å·äº‹ä»¶">ä¿¡å·äº‹ä»¶</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-f058c2ee><div class="container" data-v-f058c2ee><!--[--><!--]--><div style="position:relative;" class="content" data-v-f058c2ee><div><h1 id="è¿›ç¨‹" tabindex="-1">è¿›ç¨‹</h1><p>processæ˜¯ä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼Œå³globalå¯¹è±¡çš„å±æ€§ï¼Œå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç›´æ¥è®¿é—®åˆ°å®ƒè€Œæ— éœ€å¼•å…¥é¢å¤–æ¨¡å—</p><div class="language-js"><pre><code><span class="token keyword">let</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span>title <span class="token operator">=</span> <span class="token string">&#39;I am A master process&#39;</span><span class="token punctuation">;</span>  <span class="token comment">// ç»™è¿›ç¨‹æŒ‡å®šåç§°</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;å½“å‰è¿›ç¨‹çš„ç¯å¢ƒå˜é‡&quot;</span><span class="token punctuation">,</span>process<span class="token punctuation">.</span>env<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    å½“å‰nodeç‰ˆæœ¬:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰CPUçš„æ¶æ„:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>arch<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹è¿è¡Œçš„æ“ä½œç³»ç»Ÿå¹³å°:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>platform<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå•ä½bytes:
        heapUsed(V8å†…å­˜ä½¿ç”¨é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        heapTotal(V8å†…å­˜é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapTotal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        external(ç»‘å®šåˆ° V8 ç®¡ç†çš„ JavaScript å¯¹è±¡çš„ C++ å¯¹è±¡çš„å†…å­˜ä½¿ç”¨é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>external<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        arrayBuffers(ä¸º ArrayBuffer å’Œ SharedArrayBuffer åˆ†é…çš„å†…å­˜ï¼ŒåŒ…æ‹¬æ‰€æœ‰ Node.js Buffer):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>arrayBuffers<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        rss(å¸¸é©»é›†å¤§å°ï¼Œæ˜¯è¿›ç¨‹åœ¨ä¸»å†…å­˜è®¾å¤‡ï¼ˆå³æ€»åˆ†é…å†…å­˜çš„å­é›†ï¼‰ä¸­å ç”¨çš„ç©ºé—´é‡ï¼ŒåŒ…æ‹¬æ‰€æœ‰ C++ å’Œ JavaScript å¯¹è±¡å’Œä»£ç ):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rss<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹å·¥ä½œç›®å½•:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹id:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>pid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹å¯¹åº”çš„çˆ¶è¿›ç¨‹:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>ppid<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹å·²è¿è¡Œæ—¶é—´:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">uptime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹é«˜åˆ†è¾¨æ—¶é—´:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">hrtime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    å½“å‰è¿›ç¨‹çš„åç§° :</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    Node.js è¿›ç¨‹çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ç»å¯¹è·¯å¾„å:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>execPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">/**
 * å¦‚æœæ˜¯æºå¸¦å‘½ä»¤å¯åŠ¨ node index.js name=cxy,sex=gg
 */</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    è·å–å¯åŠ¨è¯¥è¿›ç¨‹ä¼ å…¥çš„å‚æ•°:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    =&gt;Nodeçš„execPathï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    =&gt;è¢«æ‰§è¡Œçš„JSæ–‡ä»¶è·¯å¾„ï¼ˆä¸€èˆ¬ç”¨ä¸åˆ°ï¼‰:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    =&gt;çœŸå®ä¼ å…¥å‘½ä»¤çš„å‚æ•°:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">   </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">   </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
    =&gt;çœŸå®ä¼ å…¥å‘½ä»¤çš„å‚æ•°:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>execArgv<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><h2 id="å±æ€§" tabindex="-1">å±æ€§</h2><h3 id="execargv" tabindex="-1">.execArgv</h3><p>process.execArgv</p><p>è¿”å› Node.js è¿›ç¨‹å¯åŠ¨æ—¶ä¼ å…¥çš„ä¸€ç»„ç‰¹å®šäº Node.js çš„å‘½ä»¤è¡Œé€‰é¡¹ã€‚ è¿™äº›é€‰é¡¹ä¸ä¼šå‡ºç°åœ¨ process.argv å±æ€§è¿”å›çš„æ•°ç»„ä¸­ï¼Œä¹Ÿä¸åŒ…æ‹¬ Node.js å¯æ‰§è¡Œæ–‡ä»¶ã€è„šæœ¬åç§°æˆ–è„šæœ¬åç§°åé¢çš„ä»»ä½•é€‰é¡¹ã€‚ è¿™äº›é€‰é¡¹å¯ç”¨äºè¡ç”Ÿä¸çˆ¶è¿›ç¨‹å…·æœ‰ç›¸åŒæ‰§è¡Œç¯å¢ƒçš„å­è¿›ç¨‹ã€‚å¦‚ä¸‹ï¼š</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;çœŸå®ä¼ å…¥å‘½ä»¤çš„å‚æ•°:&#39;</span>$<span class="token punctuation">{</span>process<span class="token punctuation">.</span>execArgv<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-sh"><pre><code>node --harmony  index.js b=1 a=2
</code></pre></div><p>ä¼šæ‰“å°å‡º <code>çœŸå®ä¼ å…¥å‘½ä»¤çš„å‚æ•°:--harmony</code></p><p>--harmony æ ‡è®°ï¼š</p><blockquote><p>Node.jsä¸Š--harmonyæ ‡å¿—çš„å½“å‰è¡Œä¸ºæ˜¯ä»…å¯ç”¨åˆ†æ®µåŠŸèƒ½ã€‚æ¯•ç«Ÿï¼Œå®ƒç°åœ¨æ˜¯--es_stagingçš„åŒä¹‰è¯ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™äº›æ˜¯å°šæœªè¢«è®¤ä¸ºç¨³å®šçš„å®Œæ•´åŠŸèƒ½ã€‚å¦‚æœæ‚¨æƒ³å®‰å…¨ç©è€ï¼Œå°¤å…¶æ˜¯åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¯·è€ƒè™‘åˆ é™¤æ­¤è¿è¡Œæ—¶æ ‡å¿—ï¼Œç›´åˆ°é»˜è®¤åœ¨V8ä¸Šï¼ˆå› æ­¤ï¼Œåœ¨Node.jsä¸Šï¼‰å°†å…¶å‘å¸ƒã€‚å¦‚æœå¯ç”¨æ­¤åŠŸèƒ½ï¼Œåˆ™åœ¨V8æ›´æ”¹å…¶è¯­ä¹‰ä»¥æ›´ä¸¥æ ¼åœ°éµå¾ªæ ‡å‡†çš„æƒ…å†µä¸‹ï¼Œåº”è¯¥å‡†å¤‡è¿›ä¸€æ­¥è¿›è¡ŒNode.jså‡çº§ä»¥ç ´åä»£ç ã€‚</p></blockquote><h3 id="allowednodeenvironmentflags" tabindex="-1">.allowedNodeEnvironmentFlags</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Set</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.allowedNodeEnvironmentFlags</code> å±æ€§æ˜¯ <a href="http://nodejs.cn/api/cli.html#node_optionsoptions" target="_blank" rel="noopener noreferrer"><code>NODE_OPTIONS</code></a> ç¯å¢ƒå˜é‡ä¸­å…è®¸çš„ç‰¹æ®Šçš„åªè¯» <code>Set</code> æ ‡å¿—ã€‚</p><p><code>process.allowedNodeEnvironmentFlags</code> ç»§æ‰¿äº† <code>Set</code>ï¼Œä½†è¦†ç›–äº† <code>Set.prototype.has</code> ä»¥è¯†åˆ«å‡ ç§ä¸åŒçš„å¯èƒ½æ ‡å¿—è¡¨ç¤ºã€‚ åœ¨ä»¥ä¸‹æƒ…å†µä¸‹ï¼Œ<code>process.allowedNodeEnvironmentFlags.has()</code> å°†è¿”å› <code>true</code>ï¼š</p><ul><li>æ ‡å¿—å¯ä»¥çœç•¥å‰å¯¼å•ï¼ˆ<code>-</code>ï¼‰æˆ–åŒï¼ˆ<code>--</code>ï¼‰ç ´æŠ˜å·ï¼›ä¾‹å¦‚ï¼Œ<code>inspect-brk</code> ä»£è¡¨ <code>--inspect-brk</code>ï¼Œæˆ– <code>r</code> ä»£è¡¨ <code>-r</code>ã€‚</li><li>ä¼ ç»™ V8 çš„æ ‡å¿—ï¼ˆå¦‚ <code>--v8-options</code> ä¸­æ‰€åˆ—ï¼‰å¯èƒ½ä¼šæ›¿æ¢ä¸€ä¸ªæˆ–å¤šä¸ª_éå‰å¯¼_ç ´æŠ˜å·ä½œä¸ºä¸‹åˆ’çº¿ï¼Œåä¹‹äº¦ç„¶ï¼›ä¾‹å¦‚ï¼Œ<code>--perf_basic_prof</code>ã€<code>--perf-basic-prof</code>ã€<code>--perf_basic-prof</code> ç­‰ã€‚</li><li>æ ‡å¿—å¯èƒ½åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªç­‰äº (<code>=</code>) å­—ç¬¦ï¼›åœ¨ç¬¬ä¸€ä¸ªç­‰å·ä¹‹åå¹¶åŒ…æ‹¬åœ¨å†…çš„æ‰€æœ‰å­—ç¬¦éƒ½å°†è¢«å¿½ç•¥ï¼›ä¾‹å¦‚ï¼Œ<code>--stack-trace-limit=100</code>ã€‚</li><li>æ ‡å¿—_å¿…é¡»_åœ¨ <a href="http://nodejs.cn/api/cli.html#node_optionsoptions" target="_blank" rel="noopener noreferrer"><code>NODE_OPTIONS</code></a> ä¸­æ˜¯å…è®¸çš„ã€‚</li></ul><p>åœ¨ <code>process.allowedNodeEnvironmentFlags</code> ä¸Šè¿­ä»£æ—¶ï¼Œæ ‡å¿—åªä¼šå‡ºç°_ä¸€æ¬¡_ï¼›æ¯ä¸ªéƒ½ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªç ´æŠ˜å·å¼€å¤´ã€‚ ä¼ ç»™ V8 çš„æ ‡å¿—å°†åŒ…å«ä¸‹åˆ’çº¿è€Œä¸æ˜¯éå‰å¯¼ç ´æŠ˜å·ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> allowedNodeEnvironmentFlags <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;node:process&#39;</span><span class="token punctuation">;</span>

allowedNodeEnvironmentFlags<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">flag</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// -r</span>
  <span class="token comment">// --inspect-brk</span>
  <span class="token comment">// --abort_on_uncaught_exception</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>process.allowedNodeEnvironmentFlags</code> çš„æ–¹æ³• <code>add()</code>ã€<code>clear()</code> å’Œ <code>delete()</code> ä»€ä¹ˆéƒ½ä¸åšï¼Œä¼šé™é»˜å¤±è´¥ã€‚</p><p>å¦‚æœ Node.js ç¼–è¯‘æ—¶_æ²¡æœ‰_ <a href="http://nodejs.cn/api/cli.html#node_optionsoptions" target="_blank" rel="noopener noreferrer"><code>NODE_OPTIONS</code></a> æ”¯æŒï¼ˆæ˜¾ç¤ºåœ¨ <a href="http://nodejs.cn/api/process.html#processconfig" target="_blank" rel="noopener noreferrer"><code>process.config</code></a> ä¸­ï¼‰ï¼Œé‚£ä¹ˆ <code>process.allowedNodeEnvironmentFlags</code> å°†åŒ…å«_æœ¬æ¥_å…è®¸çš„å†…å®¹ã€‚</p><h3 id="arch" tabindex="-1">.arch</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>ä¸ºå…¶ç¼–è¯‘ Node.js äºŒè¿›åˆ¶æ–‡ä»¶çš„æ“ä½œç³»ç»Ÿ CPU æ¶æ„ã€‚ å¯èƒ½çš„å€¼ä¸ºï¼š<code>&#39;arm&#39;</code>ã€<code>&#39;arm64&#39;</code>ã€<code>&#39;ia32&#39;</code>ã€<code>&#39;mips&#39;</code>ã€<code>&#39;mipsel&#39;</code>ã€<code>&#39;ppc&#39;</code>ã€<code>&#39;ppc64&#39;</code>ã€<code>&#39;s390&#39;</code>ã€<code>&#39;s390x&#39;</code>ã€ä»¥åŠ <code>&#39;x64&#39;</code>ã€‚</p><h3 id="argv" tabindex="-1">.argv</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string[]</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.argv</code> å±æ€§è¿”å›æ•°ç»„ï¼Œå…¶ä¸­åŒ…å«å¯åŠ¨ Node.js è¿›ç¨‹æ—¶ä¼ å…¥çš„å‘½ä»¤è¡Œå‚æ•°ã€‚ ç¬¬ä¸€ä¸ªå…ƒç´ å°†æ˜¯ <a href="http://nodejs.cn/api/process.html#processexecpath" target="_blank" rel="noopener noreferrer"><code>process.execPath</code></a>ã€‚ å¦‚æœéœ€è¦è®¿é—® <code>argv[0]</code> çš„åŸå§‹å€¼ï¼Œè¯·å‚é˜… <code>process.argv0</code>ã€‚ ç¬¬äºŒä¸ªå…ƒç´ å°†æ˜¯æ­£åœ¨æ‰§è¡Œçš„ JavaScript æ–‡ä»¶çš„è·¯å¾„ã€‚ å…¶ä½™å…ƒç´ å°†æ˜¯ä»»ä½•å…¶ä»–å‘½ä»¤è¡Œå‚æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œå‡è®¾ <code>process-args.js</code> æœ‰ä»¥ä¸‹è„šæœ¬ï¼š</p><div class="language-js"><pre><code><span class="token keyword">import</span> <span class="token punctuation">{</span> argv <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;node:process&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// æ‰“å° process.argv</span>
argv<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-shell"><pre><code>ä»¥å¦‚ä¸‹æ–¹å¼å¯åŠ¨ Node.js è¿›ç¨‹ï¼š
$ <span class="token function">node</span> process-args.js one <span class="token assign-left variable">two</span><span class="token operator">=</span>three four


å°†ç”Ÿæˆè¾“å‡ºï¼š

<span class="token number">0</span>: /usr/local/bin/node
<span class="token number">1</span>: /Users/mjr/work/node/process-args.js
<span class="token number">2</span>: one
<span class="token number">3</span>: <span class="token assign-left variable">two</span><span class="token operator">=</span>three
<span class="token number">4</span>: four
</code></pre></div><h3 id="channel" tabindex="-1">.channel</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¦‚æœ Node.js è¿›ç¨‹æ˜¯ä½¿ç”¨ IPC é€šé“è¡ç”Ÿï¼ˆå‚è§<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹</a>æ–‡æ¡£ï¼‰ï¼Œåˆ™ <code>process.channel</code> å±æ€§æ˜¯å¯¹ IPC é€šé“çš„å¼•ç”¨ã€‚ å¦‚æœä¸å­˜åœ¨ IPC é€šé“ï¼Œåˆ™æ­¤å±æ€§ä¸º <code>undefined</code>ã€‚</p><h3 id="config" tabindex="-1">.config</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.config</code> å±æ€§è¿”å› <code>Object</code>ï¼Œå…¶ä¸­åŒ…å«ç”¨äºç¼–è¯‘å½“å‰ Node.js å¯æ‰§è¡Œæ–‡ä»¶çš„é…ç½®é€‰é¡¹çš„ JavaScript è¡¨ç¤ºã€‚ è¿™ä¸è¿è¡Œ <code>./configure</code> è„šæœ¬æ—¶ç”Ÿæˆçš„ <code>config.gypi</code> æ–‡ä»¶ç›¸åŒã€‚</p><p>å¯èƒ½çš„è¾“å‡ºç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-js"><pre><code><span class="token punctuation">{</span>
  <span class="token literal-property property">target_defaults</span><span class="token operator">:</span>
   <span class="token punctuation">{</span> <span class="token literal-property property">cflags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token literal-property property">default_configuration</span><span class="token operator">:</span> <span class="token string">&#39;Release&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">defines</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token literal-property property">include_dirs</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
     <span class="token literal-property property">libraries</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">variables</span><span class="token operator">:</span>
   <span class="token punctuation">{</span>
     <span class="token literal-property property">host_arch</span><span class="token operator">:</span> <span class="token string">&#39;x64&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">napi_build_version</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_install_npm</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_prefix</span><span class="token operator">:</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_shared_cares</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_shared_http_parser</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_shared_libuv</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_shared_zlib</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_use_dtrace</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_use_openssl</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">node_shared_openssl</span><span class="token operator">:</span> <span class="token string">&#39;false&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">strict_aliasing</span><span class="token operator">:</span> <span class="token string">&#39;true&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">target_arch</span><span class="token operator">:</span> <span class="token string">&#39;x64&#39;</span><span class="token punctuation">,</span>
     <span class="token literal-property property">v8_use_snapshot</span><span class="token operator">:</span> <span class="token number">1</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>process.config</code> å±æ€§æ˜¯<strong>é</strong>åªè¯»çš„ï¼Œå¹¶ä¸”ç”Ÿæ€ç³»ç»Ÿä¸­å­˜åœ¨å·²çŸ¥æ‰©å±•ã€ä¿®æ”¹æˆ–å®Œå…¨æ›¿æ¢ <code>process.config</code> å€¼çš„ç°æœ‰æ¨¡å—ã€‚</p><p>ä¿®æ”¹ <code>process.config</code> å±æ€§æˆ– <code>process.config</code> å¯¹è±¡çš„ä»»ä½•å­å±æ€§å·²è¢«å¼ƒç”¨ã€‚ åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­ï¼Œ<code>process.config</code> å°†å˜ä¸ºåªè¯»ã€‚</p><h3 id="connected" tabindex="-1">.connected</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>boolean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¦‚æœ Node.js è¿›ç¨‹ä½¿ç”¨ IPC é€šé“è¡ç”Ÿï¼ˆå‚è§<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹</a>å’Œ<a href="http://nodejs.cn/api/cluster.html" target="_blank" rel="noopener noreferrer">é›†ç¾¤</a>æ–‡æ¡£ï¼‰ï¼Œåˆ™åªè¦ IPC é€šé“è¿æ¥ï¼Œ<code>process.connected</code> å±æ€§å°†è¿”å› <code>true</code>ï¼Œå¹¶åœ¨è°ƒç”¨ <code>process.disconnect()</code> åè¿”å› <code>false</code>ã€‚</p><p>ä¸€æ—¦ <code>process.connected</code> ä¸º <code>false</code>ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨ <code>process.send()</code> é€šè¿‡ IPC é€šé“å‘é€æ¶ˆæ¯</p><h3 id="debugport" tabindex="-1">.debugPort</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>number</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¯ç”¨æ—¶ Node.js è°ƒè¯•å™¨ä½¿ç”¨çš„ç«¯å£ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span>debugPort <span class="token operator">=</span> <span class="token number">5858</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ–¹æ³•" tabindex="-1">æ–¹æ³•</h2><h3 id="cwd" tabindex="-1">.cwd()</h3><div class="language-html"><pre><code>è¿”å›: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.cwd()</code> æ–¹æ³•è¿”å› Node.js è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ã€‚</p><h3 id="stdin" tabindex="-1">. stdin</h3><h4 id="stdin-td" tabindex="-1">.stdin.td</h4><p>è¯¥å±æ€§æŒ‡çš„æ˜¯ <code>process.stdout</code> çš„åº•å±‚æ–‡ä»¶æè¿°ç¬¦çš„å€¼ã€‚ è¯¥å€¼å›ºå®šä¸º <code>0</code>ã€‚ åœ¨ <a href="http://nodejs.cn/api/worker_threads.html#class-worker" target="_blank" rel="noopener noreferrer"><code>Worker</code></a> çº¿ç¨‹ä¸­ï¼Œè¯¥å­—æ®µä¸å­˜åœ¨ã€‚</p><h3 id="stdout" tabindex="-1">.stdout.</h3><h4 id="stdout-write" tabindex="-1">.stdout.write()</h4><p>console.log() ä½¿ç”¨æ ¼å¼åŒ–è°ƒç”¨ process.stdout.write è¾“å‡ºã€‚</p><div class="language-js"><pre><code><span class="token class-name">Console</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  process<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="stdout-fd" tabindex="-1">.stdout.fd</h4><p>è¯¥å±æ€§æŒ‡çš„æ˜¯ <code>process.stdout</code> çš„åº•å±‚æ–‡ä»¶æè¿°ç¬¦çš„å€¼ã€‚ è¯¥å€¼å›ºå®šä¸º <code>1</code>ã€‚ åœ¨ <a href="http://nodejs.cn/api/worker_threads.html#class-worker" target="_blank" rel="noopener noreferrer"><code>Worker</code></a> çº¿ç¨‹ä¸­ï¼Œè¯¥å­—æ®µä¸å­˜åœ¨ã€‚</p><h3 id="stderr" tabindex="-1">.stderr.</h3><h4 id="stderr-write" tabindex="-1">.stderr.write()</h4><p>console.error() ä½¿ç”¨æ ¼å¼åŒ–è°ƒç”¨ process.stderr.write è¾“å‡ºã€‚</p><div class="language-js"><pre><code><span class="token class-name">Console</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">error</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  process<span class="token punctuation">.</span>stderr<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>util<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="stderr-fd" tabindex="-1">.stderr.fd</h4><p>è¯¥å±æ€§æŒ‡çš„æ˜¯ <code>process.stdout</code> çš„åº•å±‚æ–‡ä»¶æè¿°ç¬¦çš„å€¼ã€‚ è¯¥å€¼å›ºå®šä¸º <code>2</code>ã€‚ åœ¨ <a href="http://nodejs.cn/api/worker_threads.html#class-worker" target="_blank" rel="noopener noreferrer"><code>Worker</code></a> çº¿ç¨‹ä¸­ï¼Œè¯¥å­—æ®µä¸å­˜åœ¨ã€‚</p><h3 id="memoryusage" tabindex="-1">.memoryUsage()</h3><p>æè¿° Node.js è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰çš„å¯¹è±¡ã€‚</p><div class="language-js"><pre><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
	å½“å‰è¿›ç¨‹çš„å†…å­˜ä½¿ç”¨æƒ…å†µï¼Œå•ä½bytes:
        heapUsed(V8å†…å­˜ä½¿ç”¨é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapUsed<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        heapTotal(V8å†…å­˜é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>heapTotal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        external(ç»‘å®šåˆ° V8 ç®¡ç†çš„ JavaScript å¯¹è±¡çš„ C++ å¯¹è±¡çš„å†…å­˜ä½¿ç”¨é‡):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>external<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        arrayBuffers(ä¸º ArrayBuffer å’Œ SharedArrayBuffer åˆ†é…çš„å†…å­˜ï¼ŒåŒ…æ‹¬æ‰€æœ‰ Node.js Buffer):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>arrayBuffers<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        rss(å¸¸é©»é›†å¤§å°ï¼Œæ˜¯è¿›ç¨‹åœ¨ä¸»å†…å­˜è®¾å¤‡ï¼ˆå³æ€»åˆ†é…å†…å­˜çš„å­é›†ï¼‰ä¸­å ç”¨çš„ç©ºé—´é‡ï¼ŒåŒ…æ‹¬æ‰€æœ‰ C++ å’Œ JavaScript å¯¹è±¡å’Œä»£ç ):</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span><span class="token function">memoryUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>rss<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
</code></pre></div><div class="language-"><pre><code>heapUsed(V8å†…å­˜ä½¿ç”¨é‡):3005432
heapTotal(V8å†…å­˜é‡):5529600
external(ç»‘å®šåˆ° V8 ç®¡ç†çš„ JavaScript å¯¹è±¡çš„ C++ å¯¹è±¡çš„å†…å­˜ä½¿ç”¨é‡):1119580
arrayBuffers(V8å†…å­˜é‡):18090
rss(å¸¸é©»é›†å¤§å°ï¼Œæ˜¯è¿›ç¨‹åœ¨ä¸»å†…å­˜è®¾å¤‡ï¼ˆå³æ€»åˆ†é…å†…å­˜çš„å­é›†ï¼‰ä¸­å ç”¨çš„ç©ºé—´é‡ï¼ŒåŒ…æ‹¬æ‰€æœ‰ C++ å’Œ JavaScript å¯¹è±¡å’Œä»£ç ):22269952
</code></pre></div><p>æ­¤æ–¹æ³•ä¼š éå†æ¯ä¸ªé¡µé¢ä»¥æ”¶é›†æœ‰å…³å†…å­˜ä½¿ç”¨æƒ…å†µçš„ä¿¡æ¯ï¼Œè¿™å¯èƒ½ä¼šæ ¹æ®ç¨‹åºå†…å­˜åˆ†é…è€Œå˜æ…¢</p><h3 id="memoryusage-rss" tabindex="-1">.memoryUsage.rss()</h3><p>ä¸ <code>process.memoryUsage()</code> æä¾›çš„ <code>rss</code> å±æ€§å€¼ç›¸åŒï¼Œä½† <code>process.memoryUsage.rss()</code> æ›´å¿«ã€‚</p><h3 id="channel-ref" tabindex="-1">.channel.ref()</h3><p>å¦‚æœ Node.js è¿›ç¨‹æ˜¯ä½¿ç”¨ IPC é€šé“è¡ç”Ÿï¼ˆå‚è§<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹</a>æ–‡æ¡£ï¼‰ï¼Œåˆ™ <code>process.channel</code> å±æ€§æ˜¯å¯¹ IPC é€šé“çš„å¼•ç”¨ã€‚ å¦‚æœä¸å­˜åœ¨ IPC é€šé“ï¼Œåˆ™æ­¤å±æ€§ä¸º <code>undefined</code>ã€‚</p><h3 id="channel-unref" tabindex="-1">.channel.unref()</h3><p>æ­¤æ–¹æ³•ä½¿ IPC é€šé“ä¸ä¼šä¿æŒè¿›ç¨‹çš„äº‹ä»¶å¾ªç¯è¿è¡Œï¼Œå¹¶ä¸”å³ä½¿åœ¨é€šé“æ‰“å¼€æ—¶ä¹Ÿè®©å®ƒå®Œæˆã€‚</p><p>é€šå¸¸ï¼Œè¿™æ˜¯é€šè¿‡ <code>process</code> å¯¹è±¡ä¸Šçš„ <code>&#39;disconnect&#39;</code> å’Œ <code>&#39;message&#39;</code> ç›‘å¬å™¨çš„æ•°é‡æ¥ç®¡ç†çš„ã€‚ ä½†æ˜¯ï¼Œæ­¤æ–¹æ³•å¯ç”¨äºæ˜¾å¼è¯·æ±‚ç‰¹å®šè¡Œä¸ºã€‚</p><h3 id="chdir-directory" tabindex="-1">.chdir(directory)</h3><div class="language-html"><pre><code>directory <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.chdir()</code> æ–¹æ³•æ›´æ”¹ Node.js è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ï¼Œå¦‚æœå¤±è´¥åˆ™æŠ›å‡ºå¼‚å¸¸ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœæŒ‡å®šçš„ <code>directory</code> ä¸å­˜åœ¨ï¼‰ã€‚ æ­¤ç‰¹æ€§åœ¨ <a href="http://nodejs.cn/api/worker_threads.html#class-worker" target="_blank" rel="noopener noreferrer"><code>Worker</code></a> çº¿ç¨‹ä¸­ä¸å¯ç”¨ã€‚</p><h3 id="abort" tabindex="-1">.abort()</h3><p>process.abort() æ–¹æ³•ä¼šå¯¼è‡´ Node.js è¿›ç¨‹ç«‹å³é€€å‡ºå¹¶ç”Ÿæˆä¸€ä¸ªæ ¸å¿ƒæ–‡ä»¶ã€‚</p><p>æ­¤ç‰¹æ€§åœ¨ Worker çº¿ç¨‹ä¸­ä¸å¯ç”¨ã€‚</p><h3 id="argv0" tabindex="-1">.argv0()</h3><div class="language-html"><pre><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>string</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.argv0</code> å±æ€§å­˜å‚¨äº† Node.js å¯åŠ¨æ—¶ä¼ å…¥çš„ <code>argv[0]</code> åŸå§‹å€¼çš„åªè¯»å‰¯æœ¬ã€‚</p><div class="language-js"><pre><code>$ bash <span class="token operator">-</span>c <span class="token string">&#39;exec -a customArgv0 ./node&#39;</span>
<span class="token operator">&gt;</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
<span class="token string">&#39;/Volumes/code/external/node/out/Release/node&#39;</span>
<span class="token operator">&gt;</span> process<span class="token punctuation">.</span>argv0
<span class="token string">&#39;customArgv0&#39;</span>
</code></pre></div><h3 id="cpuusage-previousvalue" tabindex="-1">.cpuUsage([previousValue])</h3><div class="language-html"><pre><code>previousValue <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span> å…ˆå‰è°ƒç”¨ process.cpuUsage() çš„è¿”å›å€¼
è¿”å›: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Object</span><span class="token punctuation">&gt;</span></span>
    user <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>integer</span><span class="token punctuation">&gt;</span></span>
    system <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>integer</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><code>process.cpuUsage()</code> æ–¹æ³•åœ¨å…·æœ‰å±æ€§ <code>user</code> å’Œ <code>system</code> çš„å¯¹è±¡ä¸­è¿”å›å½“å‰è¿›ç¨‹çš„ç”¨æˆ·å’Œç³»ç»Ÿ CPU æ—¶é—´ä½¿ç”¨æƒ…å†µï¼Œå…¶å€¼ä¸ºå¾®ç§’å€¼ï¼ˆç™¾ä¸‡åˆ†ä¹‹ä¸€ç§’ï¼‰ã€‚ è¿™äº›å€¼åˆ†åˆ«æµ‹é‡åœ¨ç”¨æˆ·å’Œç³»ç»Ÿä»£ç ä¸­èŠ±è´¹çš„æ—¶é—´ï¼Œå¦‚æœå¤šä¸ª CPU å†…æ ¸ä¸ºæ­¤è¿›ç¨‹æ‰§è¡Œå·¥ä½œï¼Œåˆ™æœ€ç»ˆå¯èƒ½ä¼šå¤§äºå®é™…ç»è¿‡çš„æ—¶é—´ã€‚</p><p>å…ˆå‰è°ƒç”¨ <code>process.cpuUsage()</code> çš„ç»“æœå¯ä»¥ä½œä¸ºå‚æ•°ä¼ ç»™å‡½æ•°ï¼Œä»¥è·å–å·®å¼‚è¯»æ•°ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> <span class="token punctuation">{</span> cpuUsage <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> startUsage <span class="token operator">=</span> <span class="token function">cpuUsage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { user: 38579, system: 6986 }</span>

<span class="token comment">// ä½¿ CPU æ—‹è½¬ 500 æ¯«ç§’</span>
<span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> now <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">cpuUsage</span><span class="token punctuation">(</span>startUsage<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { user: 514883, system: 11226 }</span>
</code></pre></div><h2 id="äº‹ä»¶" tabindex="-1">äº‹ä»¶</h2><h3 id="exit" tabindex="-1">exit</h3><p>å½“è¿›ç¨‹å°†è¦é€€å‡ºæ—¶è§¦å‘ ï¼ˆä¸€èˆ¬æ˜¯ äº‹ä»¶å¾ªç¯ä¸å†éœ€è¦æ‰§è¡Œä»»ä½•é¢å¤–çš„å·¥ä½œ æˆ–è€…è¢«æ˜¾ç¤ºè°ƒç”¨exit()ï¼‰</p><div class="language-js"><pre><code>process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;exit&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;é€€å‡ºå‰æ‰§è¡Œ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="beforeexit" tabindex="-1">beforeExit</h3><p>å½“ Node.js æ¸…ç©ºå…¶äº‹ä»¶å¾ªç¯å¹¶ä¸”æ²¡æœ‰é¢å¤–çš„å·¥ä½œè¦å®‰æ’æ—¶ï¼Œåˆ™ä¼šè§¦å‘ <code>&#39;beforeExit&#39;</code> äº‹ä»¶ã€‚ é€šå¸¸æƒ…å†µä¸‹ï¼Œå½“æ²¡æœ‰å·¥ä½œè¦è°ƒåº¦æ—¶ï¼ŒNode.js è¿›ç¨‹ä¼šé€€å‡ºï¼Œä½†æ˜¯æ³¨å†Œåœ¨ <code>&#39;beforeExit&#39;</code> äº‹ä»¶ä¸Šçš„ç›‘å¬å™¨å¯ä»¥è¿›è¡Œå¼‚æ­¥çš„è°ƒç”¨ï¼Œä»è€Œä½¿ Node.js è¿›ç¨‹ç»§ç»­ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;beforeExit&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Process beforeExit event with code: &#39;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;exit&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">code</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Process exit event with code: &#39;</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼šå¦‚è°ƒç”¨ <a href="http://nodejs.cn/api/process.html#processexitcode" target="_blank" rel="noopener noreferrer"><code>process.exit()</code></a> æˆ–æœªæ•è·çš„å¼‚å¸¸ï¼Œåˆ™ä¸ä¼šè§¦å‘ <code>&#39;beforeExit&#39;</code> äº‹ä»¶ã€‚</p></blockquote><h3 id="disconnect" tabindex="-1">disconnect</h3><p>å¦‚æœ Node.js è¿›ç¨‹æ˜¯ä½¿ç”¨ IPC é€šé“è¡ç”Ÿï¼ˆå‚è§<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹</a>å’Œ<a href="http://nodejs.cn/api/cluster.html" target="_blank" rel="noopener noreferrer">é›†ç¾¤</a>æ–‡æ¡£ï¼‰ï¼Œåˆ™åœ¨ IPC é€šé“å…³é—­æ—¶å°†è§¦å‘ <code>&#39;disconnect&#39;</code> äº‹ä»¶ã€‚</p><h3 id="message" tabindex="-1">message</h3><p>å¦‚æœ Node.js è¿›ç¨‹æ˜¯ä½¿ç”¨ IPC é€šé“è¡ç”Ÿï¼ˆå‚è§<a href="http://nodejs.cn/api/child_process.html" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹</a>å’Œ<a href="http://nodejs.cn/api/cluster.html" target="_blank" rel="noopener noreferrer">é›†ç¾¤</a>æ–‡æ¡£ï¼‰ï¼Œåˆ™æ¯å½“å­è¿›ç¨‹æ”¶åˆ°çˆ¶è¿›ç¨‹ä½¿ç”¨ <a href="http://nodejs.cn/api/child_process.html#subprocesssendmessage-sendhandle-options-callback" target="_blank" rel="noopener noreferrer"><code>childprocess.send()</code></a> å‘é€çš„æ¶ˆæ¯æ—¶ï¼Œå°±ä¼šè§¦å‘ <code>&#39;message&#39;</code> äº‹ä»¶ã€‚</p><p>æ¶ˆæ¯ç»è¿‡åºåˆ—åŒ–å’Œè§£æã€‚ ç»“æœæ¶ˆæ¯å¯èƒ½ä¸æœ€åˆå‘é€çš„æ¶ˆæ¯ä¸åŒã€‚</p><p>å¦‚æœåœ¨è¡ç”Ÿè¿›ç¨‹æ—¶å°† <code>serialization</code> é€‰é¡¹è®¾ç½®ä¸º <code>advanced</code>ï¼Œåˆ™ <code>message</code> å‚æ•°å¯ä»¥åŒ…å« JSON æ— æ³•è¡¨ç¤ºçš„æ•°æ®ã€‚ æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…<a href="http://nodejs.cn/api/child_process.html#advanced-serialization" target="_blank" rel="noopener noreferrer">å­è¿›ç¨‹çš„é«˜çº§åºåˆ—åŒ–</a>ã€‚</p><h3 id="rejectionhandled" tabindex="-1">rejectionHandled</h3><p>æ¯å½“ <code>Promise</code> è¢«æ‹’ç»å¹¶ä¸”é”™è¯¯å¥æŸ„è¢«é™„åŠ åˆ°å®ƒï¼ˆä¾‹å¦‚ä½¿ç”¨ <a href="http://url.nodejs.cn/gMRBfK" target="_blank" rel="noopener noreferrer"><code>promise.catch()</code></a>ï¼‰æ™šäºä¸€è½® Node.js äº‹ä»¶å¾ªç¯æ—¶ï¼Œåˆ™ <code>&#39;rejectionHandled&#39;</code> äº‹ä»¶å°±ä¼šè§¦å‘ã€‚</p><p>æ¯”å¦‚</p><div class="language-js"><pre><code>process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;unhandledRejection&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">reason<span class="token punctuation">,</span> promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;unhandledRejection&#39;</span><span class="token punctuation">,</span>promise<span class="token punctuation">,</span> reason<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;rejectionHandled&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;rejectionHandled&#39;</span><span class="token punctuation">,</span>promise<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, asdas!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&#39;Hello, Fundebug!&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> r <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    r<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>





<span class="token comment">// æ‰“å°å¦‚ä¸‹ï¼š</span>
unhandledRejection Promise <span class="token punctuation">{</span> <span class="token operator">&lt;</span>rejected<span class="token operator">&gt;</span> <span class="token string">&#39;Hello, asdas!&#39;</span> <span class="token punctuation">}</span> Hello<span class="token punctuation">,</span> asdas<span class="token operator">!</span>
unhandledRejection Promise <span class="token punctuation">{</span> <span class="token operator">&lt;</span>rejected<span class="token operator">&gt;</span> <span class="token string">&#39;Hello, Fundebug!&#39;</span> <span class="token punctuation">}</span> Hello<span class="token punctuation">,</span> Fundebug<span class="token operator">!</span>
unhandledRejection Promise <span class="token punctuation">{</span> <span class="token operator">&lt;</span>rejected<span class="token operator">&gt;</span> <span class="token string">&#39;Hello, Fundebug!&#39;</span> <span class="token punctuation">}</span> Hello<span class="token punctuation">,</span> Fundebug<span class="token operator">!</span>
rejectionHandled Promise <span class="token punctuation">{</span> <span class="token operator">&lt;</span>rejected<span class="token operator">&gt;</span> <span class="token string">&#39;Hello, Fundebug!&#39;</span> <span class="token punctuation">}</span>
</code></pre></div><p><code>Promise</code> å¯¹è±¡ä¼šåœ¨ <code>&#39;unhandledRejection&#39;</code> äº‹ä»¶ä¸­å…ˆå¤„ç†ï¼Œä½†åœ¨å¤„ç†è¿‡ç¨‹ä¸­è·å¾—äº†æ‹’ç»å¥æŸ„ã€‚</p><p>å¯¹äº <code>Promise</code> é“¾ï¼Œæ²¡æœ‰å§‹ç»ˆå¯ä»¥å¤„ç†æ‹’ç»çš„é¡¶å±‚æ¦‚å¿µã€‚ ç”±äºæœ¬è´¨ä¸Šæ˜¯å¼‚æ­¥çš„ï¼Œ<code>Promise</code> æ‹’ç»å¯ä»¥åœ¨æœªæ¥çš„æŸä¸ªæ—¶é—´ç‚¹å¤„ç†ï¼Œå¯èƒ½æ¯”è§¦å‘ <code>&#39;unhandledRejection&#39;</code> äº‹ä»¶æ‰€éœ€çš„äº‹ä»¶å¾ªç¯è½®è¯¢è¦æ™šå¾—å¤šã€‚</p><p>å¦ä¸€ç§è¡¨è¿°æ–¹å¼æ˜¯ï¼Œä¸åŒæ­¥ä»£ç ä¸­æœªå¤„ç†çš„å¼‚å¸¸åˆ—è¡¨ä¸æ–­å¢é•¿ä¸åŒï¼Œpromise ä¸­æœªå¤„ç†çš„æ‹’ç»åˆ—è¡¨å¯èƒ½ä¼šä¸æ–­å¢é•¿å’Œç¼©å°ã€‚</p><p>åœ¨åŒæ­¥ä»£ç ä¸­ï¼Œå½“æœªå¤„ç†çš„å¼‚å¸¸åˆ—è¡¨å¢é•¿æ—¶ï¼Œä¼šè§¦å‘ <code>&#39;uncaughtException&#39;</code> äº‹ä»¶ã€‚</p><p>åœ¨å¼‚æ­¥ä»£ç ä¸­ï¼Œå½“æœªå¤„ç†çš„æ‹’ç»åˆ—è¡¨å¢é•¿æ—¶ï¼Œä¼šè§¦å‘ <code>&#39;unhandledRejection&#39;</code> äº‹ä»¶ï¼Œå½“æœªå¤„ç†çš„æ‹’ç»åˆ—è¡¨ç¼©å°æ—¶ï¼Œä¼šè§¦å‘ <code>&#39;rejectionHandled&#39;</code> äº‹ä»¶ã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> unhandledRejections <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;unhandledRejection&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">reason<span class="token punctuation">,</span> promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  unhandledRejections<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>promise<span class="token punctuation">,</span> reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;rejectionHandled&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">promise</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  unhandledRejections<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="uncaughtexceptionï¼ˆæœªï¼‰" tabindex="-1">uncaughtExceptionï¼ˆæœªï¼‰</h3><ul><li><code>err</code> <a href="http://url.nodejs.cn/qZ873x" target="_blank" rel="noopener noreferrer"></a> æœªæ•è·çš„å¼‚å¸¸ã€‚</li><li><code>origin</code> <a href="http://url.nodejs.cn/9Tw2bK" target="_blank" rel="noopener noreferrer"></a> æŒ‡ç¤ºå¼‚å¸¸æ˜¯æºè‡ªæœªå¤„ç†çš„æ‹’ç»è¿˜æ˜¯æºè‡ªåŒæ­¥é”™è¯¯ã€‚ å¯ä»¥æ˜¯ <code>&#39;uncaughtException&#39;</code> æˆ– <code>&#39;unhandledRejection&#39;</code>ã€‚ åè€…ç”¨äºåœ¨åŸºäº <code>Promise</code> çš„å¼‚æ­¥ä¸Šä¸‹æ–‡ä¸­å‘ç”Ÿå¼‚å¸¸ï¼ˆæˆ–è€…å¦‚æœ <code>Promise</code> è¢«æ‹’ç»ï¼‰å¹¶ä¸” <a href="http://nodejs.cn/api/cli.html#--unhandled-rejectionsmode" target="_blank" rel="noopener noreferrer"><code>--unhandled-rejections</code></a> æ ‡å¿—è®¾ç½®ä¸º <code>strict</code> æˆ– <code>throw</code>ï¼ˆè¿™æ˜¯é»˜è®¤å€¼ï¼‰å¹¶ä¸”æ‹’ç»æœªå¤„ç†ï¼Œæˆ–è€…å‘ç”Ÿæ‹’ç»æ—¶ åœ¨å‘½ä»¤è¡Œå…¥å£ç‚¹çš„ ES æ¨¡å—é™æ€åŠ è½½é˜¶æ®µã€‚</li></ul><p>å½“æœªæ•è·çš„ JavaScript å¼‚å¸¸ä¸€ç›´å†’æ³¡å›åˆ°äº‹ä»¶å¾ªç¯æ—¶ï¼Œåˆ™ä¼šè§¦å‘ <code>&#39;uncaughtException&#39;</code> äº‹ä»¶ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒNode.js é€šè¿‡å°†å †æ ˆè·Ÿè¸ªæ‰“å°åˆ° <code>stderr</code> å¹¶ä»¥ä»£ç  1 é€€å‡ºï¼Œè¦†ç›–ä»»ä½•å…ˆå‰è®¾ç½®çš„ <a href="http://nodejs.cn/api/process.html#processexitcode" target="_blank" rel="noopener noreferrer"><code>process.exitCode</code></a> æ¥å¤„ç†æ­¤ç±»å¼‚å¸¸ã€‚ ä¸º <code>&#39;uncaughtException&#39;</code> äº‹ä»¶æ·»åŠ å¥æŸ„ä¼šè¦†ç›–æ­¤é»˜è®¤è¡Œä¸ºã€‚ æˆ–è€…ï¼Œæ›´æ”¹ <code>&#39;uncaughtException&#39;</code> å¤„ç†ç¨‹åºä¸­çš„ <a href="http://nodejs.cn/api/process.html#processexitcode" target="_blank" rel="noopener noreferrer"><code>process.exitCode</code></a>ï¼Œè¿™å°†å¯¼è‡´è¿›ç¨‹ä»¥æä¾›çš„é€€å‡ºç é€€å‡ºã€‚ å¦åˆ™ï¼Œåœ¨å­˜åœ¨æ­¤ç±»å¥æŸ„çš„æƒ…å†µä¸‹ï¼Œè¿›ç¨‹å°†ä»¥ 0 é€€å‡ºã€‚</p><h5 id="æ³¨æ„-æ­£ç¡®ä½¿ç”¨-uncaughtexception" tabindex="-1">æ³¨æ„: æ­£ç¡®ä½¿ç”¨ &#39;uncaughtException&#39;<a href="http://nodejs.cn/api/process.html#warning-using-uncaughtexception-correctly" target="_blank" rel="noopener noreferrer">#</a></h5><p><a href="http://nodejs.cn/api/process/warning_using_uncaughtexception_correctly.html" target="_blank" rel="noopener noreferrer">ä¸­è‹±å¯¹ç…§</a></p><p><code>&#39;uncaughtException&#39;</code> æ˜¯ç”¨äºå¼‚å¸¸å¤„ç†çš„ç²—ç•¥æœºåˆ¶ï¼Œä»…ç”¨ä½œæœ€åçš„æ‰‹æ®µã€‚ äº‹ä»¶_ä¸åº”è¯¥_ç”¨ä½œ <code>On Error Resume Next</code> çš„ç­‰ä»·ç‰©ã€‚ æœªå¤„ç†çš„å¼‚å¸¸æœ¬è´¨ä¸Šæ„å‘³ç€åº”ç”¨ç¨‹åºå¤„äºæœªå®šä¹‰çŠ¶æ€ã€‚ åœ¨æ²¡æœ‰ä»å¼‚å¸¸ä¸­æ­£ç¡®æ¢å¤çš„æƒ…å†µä¸‹å°è¯•æ¢å¤åº”ç”¨ç¨‹åºä»£ç å¯èƒ½ä¼šå¯¼è‡´å…¶ä»–ä¸å¯é¢„è§å’Œä¸å¯é¢„æµ‹çš„é—®é¢˜ã€‚</p><p>ä»äº‹ä»¶å¥æŸ„ä¸­æŠ›å‡ºçš„å¼‚å¸¸å°†ä¸ä¼šè¢«æ•è·ã€‚ è€Œæ˜¯ï¼Œè¯¥è¿›ç¨‹å°†ä»¥éé›¶é€€å‡ºç é€€å‡ºï¼Œå¹¶å°†æ‰“å°å †æ ˆè·Ÿè¸ªã€‚ è¿™æ˜¯ä¸ºäº†é¿å…æ— é™é€’å½’ã€‚</p><p>å°è¯•åœ¨æœªæ•è·å¼‚å¸¸åæ­£å¸¸æ¢å¤ç±»ä¼¼äºå‡çº§è®¡ç®—æœºæ—¶æ‹”æ‰ç”µæºçº¿ã€‚ åæœ‰å…«ä¹ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰å‘ç”Ÿã€‚ ä½†æ˜¯ç¬¬åæ¬¡ï¼Œç³»ç»ŸæŸåäº†ã€‚</p><p><code>&#39;uncaughtException&#39;</code> çš„æ­£ç¡®ç”¨æ³•æ˜¯åœ¨å…³é—­è¿›ç¨‹ä¹‹å‰å¯¹åˆ†é…çš„èµ„æºï¼ˆä¾‹å¦‚æ–‡ä»¶æè¿°ç¬¦ã€å¥æŸ„ç­‰ï¼‰æ‰§è¡ŒåŒæ­¥æ¸…ç†ã€‚ <strong>åœ¨ <code>&#39;uncaughtException&#39;</code> ä¹‹åæ¢å¤æ­£å¸¸æ“ä½œæ˜¯ä¸å®‰å…¨çš„ã€‚</strong></p><p>ä¸ºäº†ä»¥æ›´å¯é çš„æ–¹å¼é‡æ–°å¯åŠ¨å´©æºƒçš„åº”ç”¨ç¨‹åºï¼Œæ— è®º <code>&#39;uncaughtException&#39;</code> æ˜¯å¦è§¦å‘ï¼Œéƒ½åº”è¯¥åœ¨å•ç‹¬çš„è¿›ç¨‹ä¸­ä½¿ç”¨å¤–éƒ¨ç›‘è§†å™¨æ¥æ£€æµ‹åº”ç”¨ç¨‹åºæ•…éšœå¹¶æ ¹æ®éœ€è¦æ¢å¤æˆ–é‡æ–°å¯åŠ¨ã€‚</p><h3 id="uncaughtexceptionmonitor" tabindex="-1">uncaughtExceptionMonitor</h3><h3 id="unhandledrejection" tabindex="-1">unhandledRejection</h3><h3 id="warning" tabindex="-1">warning</h3><p>æ¯å½“ Node.js è§¦å‘è¿›ç¨‹è­¦å‘Šæ—¶ï¼Œåˆ™ä¼šè§¦å‘ <code>&#39;warning&#39;</code> äº‹ä»¶ã€‚</p><p>è¿›ç¨‹è­¦å‘Šç±»ä¼¼äºé”™è¯¯ï¼Œå› ä¸ºå…¶æè¿°äº†å¼•èµ·ç”¨æˆ·æ³¨æ„çš„å¼‚å¸¸æƒ…å†µã€‚ ä½†æ˜¯ï¼Œè­¦å‘Šä¸æ˜¯æ­£å¸¸ Node.js å’Œ JavaScript é”™è¯¯å¤„ç†æµç¨‹çš„ä¸€éƒ¨åˆ†ã€‚ Node.js å¯ä»¥åœ¨æ£€æµ‹åˆ°å¯èƒ½å¯¼è‡´æ¬¡ä¼˜åº”ç”¨ç¨‹åºæ€§èƒ½ã€é”™è¯¯æˆ–å®‰å…¨æ¼æ´çš„ä¸è‰¯ç¼–ç å®è·µæ—¶è§¦å‘è­¦å‘Šã€‚</p><div class="language-js"><pre><code><span class="token keyword">const</span> process <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;warning&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">warning</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>warning<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// æ‰“å°è­¦å‘Šåç§°</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>warning<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰“å°è­¦å‘Šä¿¡æ¯</span>
  console<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>warning<span class="token punctuation">.</span>stack<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// æ‰“å°å †æ ˆè·Ÿè¸ª</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNode.js ä¼šå°†è¿›ç¨‹è­¦å‘Šæ‰“å°åˆ° <code>stderr</code>ã€‚ <code>--no-warnings</code> å‘½ä»¤è¡Œé€‰é¡¹å¯ç”¨äºæŠ‘åˆ¶é»˜è®¤æ§åˆ¶å°è¾“å‡ºï¼Œä½† <code>&#39;warning&#39;</code> äº‹ä»¶ä»å°†ç”± <code>process</code> å¯¹è±¡è§¦å‘ã€‚</p><p>ä»¥ä¸‹ç¤ºä¾‹è¯´æ˜äº†åœ¨å‘äº‹ä»¶æ·»åŠ è¿‡å¤šç›‘å¬å™¨æ—¶æ‰“å°åˆ° <code>stderr</code> çš„è­¦å‘Šï¼š</p><div class="language-shell"><pre><code>$ <span class="token function">node</span>
<span class="token operator">&gt;</span> events.defaultMaxListeners <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> process.on<span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> process.on<span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> <span class="token punctuation">(</span>node:38638<span class="token punctuation">)</span> MaxListenersExceededWarning: Possible EventEmitter memory leak
detected. <span class="token number">2</span> foo listeners added. Use emitter.setMaxListeners<span class="token punctuation">(</span><span class="token punctuation">)</span> to increase limit
</code></pre></div><p>ç›¸æ¯”ä¹‹ä¸‹ï¼Œä»¥ä¸‹ç¤ºä¾‹å…³é—­é»˜è®¤è­¦å‘Šè¾“å‡ºå¹¶å‘ <code>&#39;warning&#39;</code> äº‹ä»¶æ·»åŠ è‡ªå®šä¹‰å¥æŸ„ï¼š</p><div class="language-shell"><pre><code>$ <span class="token function">node</span> --no-warnings
<span class="token operator">&gt;</span> const p <span class="token operator">=</span> process.on<span class="token punctuation">(</span><span class="token string">&#39;warning&#39;</span>, <span class="token punctuation">(</span>warning<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> console.warn<span class="token punctuation">(</span><span class="token string">&#39;Do not do that!&#39;</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> events.defaultMaxListeners <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> process.on<span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> process.on<span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span>, <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">&gt;</span> Do not <span class="token keyword">do</span> that<span class="token operator">!</span>
</code></pre></div><p><code>--trace-warnings</code> å‘½ä»¤è¡Œé€‰é¡¹å¯ç”¨äºä½¿è­¦å‘Šçš„é»˜è®¤æ§åˆ¶å°è¾“å‡ºåŒ…æ‹¬è­¦å‘Šçš„å®Œæ•´å †æ ˆè·Ÿè¸ªã€‚</p><p>ä½¿ç”¨ <code>--throw-deprecation</code> å‘½ä»¤è¡Œæ ‡å¿—å¯åŠ¨ Node.js å°†å¯¼è‡´è‡ªå®šä¹‰å¼ƒç”¨è­¦å‘Šä½œä¸ºå¼‚å¸¸æŠ›å‡ºã€‚</p><p>ä½¿ç”¨ <code>--trace-deprecation</code> å‘½ä»¤è¡Œæ ‡å¿—å°†å¯¼è‡´è‡ªå®šä¹‰å¼ƒç”¨ä¸å †æ ˆè·Ÿè¸ªä¸€èµ·æ‰“å°åˆ° <code>stderr</code>ã€‚</p><p>ä½¿ç”¨ <code>--no-deprecation</code> å‘½ä»¤è¡Œæ ‡å¿—å°†æŠ‘åˆ¶è‡ªå®šä¹‰å¼ƒç”¨çš„æ‰€æœ‰æŠ¥å‘Šã€‚</p><p><code>*-deprecation</code> å‘½ä»¤è¡Œæ ‡å¿—ä»…å½±å“ä½¿ç”¨åç§° <code>&#39;DeprecationWarning&#39;</code> çš„è­¦å‘Šã€‚</p><h3 id="worker" tabindex="-1">worker</h3><p>åˆ›å»ºæ–°çš„ <code>Worker</code> çº¿ç¨‹åä¼šè§¦å‘ <code>&#39;worker&#39;</code> äº‹ä»¶ã€‚</p><h3 id="ä¿¡å·äº‹ä»¶" tabindex="-1">ä¿¡å·äº‹ä»¶</h3><p>å½“ Node.js è¿›ç¨‹æ”¶åˆ°ä¿¡å·æ—¶ï¼Œåˆ™å°†è§¦å‘ä¿¡å·äº‹ä»¶ã€‚ æœ‰å…³æ ‡å‡† POSIX ä¿¡å·åç§°ï¼ˆä¾‹å¦‚ <code>&#39;SIGINT&#39;</code>ã€<code>&#39;SIGHUP&#39;</code> ç­‰ï¼‰çš„åˆ—è¡¨ï¼Œè¯·å‚é˜… <a href="http://url.nodejs.cn/Fj3tfw" target="_blank" rel="noopener noreferrer"><code>signal(7)</code></a>ã€‚</p><p>ä¿¡å·åœ¨ <a href="http://nodejs.cn/api/worker_threads.html#class-worker" target="_blank" rel="noopener noreferrer"><code>Worker</code></a> çº¿ç¨‹ä¸Šä¸å¯ç”¨ã€‚</p><p>ä¿¡å·å¥æŸ„å°†æ¥æ”¶ä¿¡å·çš„åç§°ï¼ˆ<code>&#39;SIGINT&#39;</code>ã€<code>&#39;SIGTERM&#39;</code> ç­‰ï¼‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p>æ¯ä¸ªäº‹ä»¶çš„åç§°å°†æ˜¯ä¿¡å·çš„å¤§å†™é€šç”¨åç§°ï¼ˆä¾‹å¦‚ <code>&#39;SIGINT&#39;</code> è¡¨ç¤º <code>SIGINT</code> ä¿¡å·ï¼‰ã€‚</p><div class="language-js"><pre><code><span class="token keyword">import</span> process <span class="token keyword">from</span> <span class="token string">&#39;node:process&#39;</span><span class="token punctuation">;</span>

<span class="token comment">// ä»æ ‡å‡†è¾“å…¥å¼€å§‹è¯»å–ï¼Œå› æ­¤è¿›ç¨‹ä¸ä¼šé€€å‡ºã€‚</span>
process<span class="token punctuation">.</span>stdin<span class="token punctuation">.</span><span class="token function">resume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;SIGINT&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Received SIGINT. Press Control-D to exit.&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ä½¿ç”¨å•ä¸ªå‡½æ•°å¤„ç†å¤šä¸ªä¿¡å·</span>
<span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token parameter">signal</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Received </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>signal<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;SIGINT&#39;</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
process<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;SIGTERM&#39;</span><span class="token punctuation">,</span> handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><code>&#39;SIGUSR1&#39;</code> ç”± Node.js é¢„ç•™ä»¥å¯åŠ¨<a href="http://nodejs.cn/api/debugger.html" target="_blank" rel="noopener noreferrer">è°ƒè¯•å™¨</a>ã€‚ å¯ä»¥å®‰è£…ç›‘å¬å™¨ï¼Œä½†è¿™æ ·åšå¯èƒ½ä¼šå¹²æ‰°è°ƒè¯•å™¨ã€‚</li><li><code>&#39;SIGTERM&#39;</code> å’Œ <code>&#39;SIGINT&#39;</code> åœ¨é Windows å¹³å°ä¸Šå…·æœ‰é»˜è®¤çš„å¥æŸ„ï¼Œå…¶åœ¨ä½¿ç”¨ä»£ç  <code>128 + signal number</code> é€€å‡ºä¹‹å‰é‡ç½®ç»ˆç«¯æ¨¡å¼ã€‚ å¦‚æœè¿™äº›ä¿¡å·ä¹‹ä¸€å®‰è£…äº†ç›‘å¬å™¨ï¼Œåˆ™å…¶é»˜è®¤è¡Œä¸ºå°†è¢«åˆ é™¤ï¼ˆNode.js å°†ä¸å†é€€å‡ºï¼‰ã€‚</li><li><code>&#39;SIGPIPE&#39;</code> é»˜è®¤æƒ…å†µä¸‹å¿½ç•¥ã€‚ å®ƒå¯ä»¥å®‰è£…ç›‘å¬å™¨ã€‚</li><li><code>&#39;SIGHUP&#39;</code> åœ¨ Windows ä¸Šæ˜¯åœ¨å…³é—­æ§åˆ¶å°çª—å£æ—¶ç”Ÿæˆï¼Œåœ¨å…¶ä»–å¹³å°ä¸Šæ˜¯åœ¨å„ç§ç±»ä¼¼æ¡ä»¶ä¸‹ç”Ÿæˆã€‚ å‚è§ <a href="http://url.nodejs.cn/Fj3tfw" target="_blank" rel="noopener noreferrer"><code>signal(7)</code></a>ã€‚ å®ƒå¯ä»¥å®‰è£…ç›‘å¬å™¨ï¼Œä½†æ˜¯ Node.js å°†åœ¨å¤§çº¦ 10 ç§’åè¢« Windows æ— æ¡ä»¶åœ°ç»ˆæ­¢ã€‚ åœ¨é Windows å¹³å°ä¸Šï¼Œ<code>SIGHUP</code> çš„é»˜è®¤è¡Œä¸ºæ˜¯ç»ˆæ­¢ Node.jsï¼Œä½†ä¸€æ—¦å®‰è£…äº†ç›‘å¬å™¨ï¼Œåˆ™å…¶é»˜è®¤è¡Œä¸ºå°†è¢«åˆ é™¤ã€‚</li><li><code>&#39;SIGTERM&#39;</code> Windows ä¸Šä¸æ”¯æŒï¼Œå¯ä»¥ç›‘å¬ã€‚</li><li>æ‰€æœ‰å¹³å°éƒ½æ”¯æŒæ¥è‡ªç»ˆç«¯çš„ <code>&#39;SIGINT&#39;</code>ï¼Œé€šå¸¸å¯ä»¥ä½¿ç”¨ Ctrl+C ç”Ÿæˆï¼ˆä½†æ˜¯è¿™æ˜¯å¯é…ç½®çš„ï¼‰ã€‚ å½“å¯ç”¨<a href="http://nodejs.cn/api/tty.html#readstreamsetrawmodemode" target="_blank" rel="noopener noreferrer">ç»ˆç«¯åŸå§‹æ¨¡å¼</a>å¹¶ä½¿ç”¨ Ctrl+C æ—¶ä¸ä¼šç”Ÿæˆå®ƒã€‚</li><li><code>&#39;SIGBREAK&#39;</code> åœ¨ Windows ä¸Šï¼Œå½“æŒ‰ä¸‹ Ctrl+Break æ—¶ä¼šå‘é€ã€‚ åœ¨é Windows å¹³å°ä¸Šï¼Œå®ƒå¯ä»¥è¢«ç›‘å¬ï¼Œä½†æ— æ³•å‘é€æˆ–ç”Ÿæˆå®ƒã€‚</li><li><code>&#39;SIGWINCH&#39;</code> å½“è°ƒæ•´æ§åˆ¶å°å¤§å°æ—¶ä¼šå‘é€ã€‚ åœ¨ Windows ä¸Šï¼Œè¿™åªä¼šå‘ç”Ÿåœ¨å½“å…‰æ ‡ç§»åŠ¨æ—¶å†™å…¥æ§åˆ¶å°ï¼Œæˆ–è€…å½“åœ¨åŸå§‹æ¨¡å¼ä¸‹ä½¿ç”¨å¯è¯»çš„ç»ˆç«¯æ—¶ã€‚</li><li><code>&#39;SIGKILL&#39;</code> ä¸èƒ½å®‰è£…ç›‘å¬å™¨ï¼Œå®ƒä¼šæ— æ¡ä»¶åœ°ç»ˆæ­¢æ‰€æœ‰å¹³å°ä¸Šçš„ Node.jsã€‚</li><li><code>&#39;SIGSTOP&#39;</code> ä¸èƒ½å®‰è£…ç›‘å¬å™¨ã€‚</li><li><code>&#39;SIGBUS&#39;</code>ã€<code>&#39;SIGFPE&#39;</code>ã€<code>&#39;SIGSEGV&#39;</code> å’Œ <code>&#39;SIGILL&#39;</code>ï¼Œå½“ä¸ä½¿ç”¨ <a href="http://url.nodejs.cn/KDV7jD" target="_blank" rel="noopener noreferrer"><code>kill(2)</code></a> äººä¸ºå¼•å‘æ—¶ï¼Œæœ¬è´¨ä¸Šä¼šä½¿è¿›ç¨‹å¤„äºè°ƒç”¨ JS ç›‘å¬å™¨ä¸å®‰å…¨çš„çŠ¶æ€ã€‚ è¿™æ ·åšå¯èƒ½ä¼šå¯¼è‡´è¿›ç¨‹åœæ­¢å“åº”ã€‚</li><li><code>0</code> å¯ä»¥å‘é€æ¥æµ‹è¯•è¿›ç¨‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœè¿›ç¨‹å­˜åœ¨åˆ™æ²¡å½±å“ï¼Œå¦‚æœè¿›ç¨‹ä¸å­˜åœ¨åˆ™æŠ›å‡ºé”™è¯¯ã€‚</li></ul><p>Windows ä¸æ”¯æŒä¿¡å·ï¼Œå› æ­¤æ²¡æœ‰ç­‰ä»·çš„ä½¿ç”¨ä¿¡å·æ¥ç»ˆæ­¢ï¼Œä½† Node.js æä¾›äº†ä¸€äº›å¯¹ <a href="http://nodejs.cn/api/process.html#processkillpid-signal" target="_blank" rel="noopener noreferrer"><code>process.kill()</code></a> å’Œ <a href="http://nodejs.cn/api/child_process.html#subprocesskillsignal" target="_blank" rel="noopener noreferrer"><code>subprocess.kill()</code></a> çš„æ¨¡æ‹Ÿï¼š</p><ul><li>å‘é€ <code>SIGINT</code>ã€<code>SIGTERM</code>ã€å’Œ <code>SIGKILL</code> ä¼šå¯¼è‡´ç›®æ ‡è¿›ç¨‹æ— æ¡ä»¶çš„ç»ˆæ­¢ï¼Œä¹‹åå­è¿›ç¨‹ä¼šæŠ¥å‘Šè¿›ç¨‹è¢«ä¿¡å·ç»ˆæ­¢ã€‚</li><li>å‘é€ä¿¡å· <code>0</code> å¯ä»¥ä½œä¸ºç‹¬ç«‹äºå¹³å°çš„æ–¹å¼æ¥æµ‹è¯•è¿›ç¨‹æ˜¯å¦å­˜åœ¨ã€‚</li></ul><p>å•Š</p><h1 id="å­è¿›ç¨‹" tabindex="-1"><a href="./child_process.html">......å­è¿›ç¨‹</a></h1></div></div><footer class="page-footer" data-v-f058c2ee data-v-4d1950e8><div class="edit" data-v-4d1950e8><div class="edit-link" data-v-4d1950e8 data-v-d1f281aa><!----></div></div><div class="updated" data-v-4d1950e8><p class="last-updated" data-v-4d1950e8 data-v-01ad1c9a><span class="prefix" data-v-01ad1c9a>æœ€è¿‘æ›´æ–°æ—¶é—´:</span><span class="datetime" data-v-01ad1c9a></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ideshortcutkey_webstorm.md\":\"8f6817f3\",\"about_index.md\":\"01b235a8\",\"client_electron_base.md\":\"79df7dbc\",\"client_electron_index.md\":\"626b9be5\",\"client_typescript_index.md\":\"fb41d36d\",\"client_css_æ»šåŠ¨æ¡.md\":\"293d8e70\",\"client_javascript_xmlhttprequest.md\":\"8aadba5c\",\"client_javascript_base.md\":\"23ef7cf5\",\"client_javascript_index.md\":\"a84c3537\",\"client_javascript_å‡½æ•°.md\":\"db68be79\",\"concat_index.md\":\"877691c0\",\"environmentconstruction_index.md\":\"f872815c\",\"environmentconstruction_kafka.md\":\"62641f4a\",\"environmentconstruction_linux.md\":\"b63089ba\",\"environmentconstruction_mongodbç¦»çº¿å®‰è£….md\":\"362c75fb\",\"environmentconstruction_mysqlç¦»çº¿å®‰è£….md\":\"36f9c57e\",\"environmentconstruction_nginx.md\":\"076c612d\",\"environmentconstruction_redisç¦»çº¿å®‰è£….md\":\"6cdb72f1\",\"home_home.md\":\"0d8ff9a7\",\"index.md\":\"8182c745\",\"interest_drug_index.md\":\"6c1a7ee1\",\"interest_music_index.md\":\"47304e7a\",\"npmpackage_index.md\":\"f6c8e56a\",\"npmpackage_log4js.md\":\"4621b71e\",\"qdcz-note.md\":\"4bb643cc\",\"service_linux_index.md\":\"17e0561e\",\"service_linux_linux.md\":\"02aaa70a\",\"service_linux_å­˜å‚¨å•ä½.md\":\"9ea95410\",\"service_mongodb_base.md\":\"64b48fa5\",\"service_mongodb_index.md\":\"267683f8\",\"service_mongodb_å»ºç«‹ttlç´¢å¼•.md\":\"cae116bc\",\"service_nginx_index.md\":\"b4f22df6\",\"service_nginx_windowç‰ˆæœ¬.md\":\"8162a141\",\"service_nodejs_base.md\":\"4b7a0cf0\",\"service_nodejs_buffer.md\":\"f8a8df62\",\"service_nodejs_child_process.md\":\"83fa6bbd\",\"service_nodejs_index.md\":\"e8394bda\",\"service_nodejs_nodeåˆ†äº«è¯¾1.md\":\"8a7b3ccf\",\"service_nodejs_process.md\":\"5f87cb8c\",\"service_nodejs_stream.md\":\"4c11cbc7\",\"service_nodejs_å·¥å…·å‡½æ•°.md\":\"4ecf2ddb\",\"service_nodejs_æ–‡ä»¶æè¿°ç¬¦.md\":\"21025e3e\",\"service_nodejs_æ—¥å¿—ç³»ç»Ÿè®°å½•.md\":\"4cfc8540\",\"service_nodejs_æ··æ·†ç¼–è¯‘æ‰“åŒ….md\":\"b82165fa\",\"service_nodejs_é”.md\":\"3c2a6e16\",\"service_go_study_1.md\":\"647566a6\",\"service_go_study_index.md\":\"43335d9f\",\"service_kafka_index.md\":\"81e7af6c\",\"service_koa_index.md\":\"2a7dc9bc\",\"service_koa_æ´‹è‘±æ¨¡å‹.md\":\"8391d839\",\"softwareengineering_é¢å‘å¯¹è±¡ç¼–ç¨‹.md\":\"f600078e\",\"temporary_index.md\":\"2cb121ec\",\"temporary_recentplan.md\":\"16f06e40\",\"temporary_websocketforauthbynodejs.md\":\"8a5df03e\",\"temporary_work_day_work_report.md\":\"8afaa7de\",\"temporary_work_todayplan.md\":\"a8386dff\",\"temporary_work_weekly_work_report.md\":\"0d5de338\",\"windowsystem_cmdå‘½ä»¤.md\":\"8c4c3596\",\"windowsystem_index.md\":\"7c834cb9\",\"windowsystem_openssl.md\":\"8256351a\",\"windowsystem_åˆ›å»ºæœ¬åœ°å…±äº«æ–‡ä»¶å¤¹.md\":\"f8fede8b\"}")</script>
    <script type="module" async src="/assets/app.71728ad2.js"></script>
    
  </body>
</html>