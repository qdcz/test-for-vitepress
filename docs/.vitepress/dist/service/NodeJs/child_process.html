<!DOCTYPE html>
<html lang="en-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>child_process | æ¾œæ¼¾</title>
    <meta name="description" content="å¹¿å¤©ä¸‹ä¹‹å¹¿,æ·±å¤©ä¸‹ä¹‹æ·±">
    <link rel="stylesheet" href="/assets/style.49f07aca.css">
    <link rel="modulepreload" href="/assets/Home.83738dfc.js">
    <link rel="modulepreload" href="/assets/app.f3070ad9.js">
    <link rel="modulepreload" href="/assets/service_NodeJs_child_process.md.2e9c372c.lean.js">
    
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
  <meta name="keywords" content="æ¾œæ¼¾">
  <link rel="icon" href="/favicon.ico">
  <link rel="stylesheet" href="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.css">
  <script src="https://lib.baomitu.com/gitalk/1.7.0/gitalk.min.js"></script>
  <script src="https://lib.baomitu.com/axios/0.21.1/axios.js"></script>
  <meta name="twitter:title" content="child_process | æ¾œæ¼¾">
  <meta property="og:title" content="child_process | æ¾œæ¼¾">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-d186b2c2><div class="sidebar-button" data-v-d186b2c2><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="æ¾œæ¼¾, back to home" data-v-d186b2c2 data-v-34a93bc8><img class="logo" src="/logo2.jpg" alt="Logo" data-v-34a93bc8> æ¾œæ¼¾</a><div class="flex-grow" data-v-d186b2c2></div><div class="nav" data-v-d186b2c2><nav class="nav-links" data-v-d186b2c2 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>window <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linux <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-7e9d9da8><nav class="nav-links nav" data-v-7e9d9da8 data-v-30b7e073><!--[--><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/" data-v-711da5ba>ğŸ  é¦–é¡µ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/home/home" data-v-711da5ba>ç ä¸Šè¡ŒåŠ¨ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/IDEShortcutKey/WebStorm" data-v-711da5ba>ç¼–è¾‘å™¨å¿«æ·é”® <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/environmentConstruction/index" data-v-711da5ba>ç¯å¢ƒæ­å»º <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/windowSystem/index" data-v-711da5ba>window <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/service/Linux/index" data-v-711da5ba>linux <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/about/index" data-v-711da5ba>ğŸ”¨å…³äº <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/concat/index" data-v-711da5ba>ğŸ‘«å‹æƒ…é“¾æ¥ <!----></a></div></div><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item" href="/temporary/index" data-v-711da5ba>ä¸´æ—¶å­˜å‚¨ <!----></a></div></div><!--]--><!----><div class="item" data-v-30b7e073><div class="nav-link" data-v-30b7e073 data-v-711da5ba><a class="item isExternal" href="https://github.com/qdcz" target="_blank" rel="noopener noreferrer" data-v-711da5ba>GitHub <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-711da5ba><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav><!--[--><!--]--><ul class="sidebar-links" data-v-7e9d9da8><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#spawn">.spawn()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#exec">.exec()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#execfile">.execFile()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#fork">.fork()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#æ–¹æ³•">æ–¹æ³•</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#exec-1">exec()</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#execfile-1">.execFile()</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-f058c2ee><div class="container" data-v-f058c2ee><!--[--><!--]--><div style="position:relative;" class="content" data-v-f058c2ee><div><h1 id="child-process" tabindex="-1">child_process</h1><p>child_process æ¨¡å—æä¾›äº†è¡ç”Ÿå­è¿›ç¨‹çš„èƒ½åŠ›, ç®€å•æ¥è¯´å°±æ˜¯æ‰§è¡Œcmdå‘½ä»¤çš„èƒ½åŠ›</p><h2 id="spawn" tabindex="-1">.spawn()</h2><p>é€‚ç”¨äºè¿”å›å¤§é‡æ•°æ®ï¼Œä¾‹å¦‚å›¾åƒå¤„ç†ï¼ŒäºŒè¿›åˆ¶æ•°æ®å¤„ç†ã€‚</p><h2 id="exec" tabindex="-1">.exec()</h2><p>é€‚ç”¨äºå°é‡æ•°æ®ï¼ŒmaxBuffer é»˜è®¤å€¼ä¸º 200 * 1024 è¶…å‡ºè¿™ä¸ªé»˜è®¤å€¼å°†ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œæ•°æ®é‡è¿‡å¤§å¯é‡‡ç”¨ spawn</p><h2 id="execfile" tabindex="-1">.execFile()</h2><p>ç±»ä¼¼ child_process.exec()ï¼ŒåŒºåˆ«æ˜¯ä¸èƒ½é€šè¿‡ shell æ¥æ‰§è¡Œï¼Œä¸æ”¯æŒåƒ I/O é‡å®šå‘å’Œæ–‡ä»¶æŸ¥æ‰¾è¿™æ ·çš„è¡Œä¸º</p><h2 id="fork" tabindex="-1">.fork()</h2><p>è¡ç”Ÿæ–°çš„è¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰è‡ªå·±çš„ V8 å®ä¾‹ã€å†…å­˜ï¼Œç³»ç»Ÿèµ„æºæ˜¯æœ‰é™çš„ï¼Œä¸å»ºè®®è¡ç”Ÿå¤ªå¤šçš„å­è¿›ç¨‹å‡ºæ¥ï¼Œ é€šé•¿æ ¹æ®ç³»ç»Ÿ** CPU æ ¸å¿ƒæ•°**è®¾ç½®ã€‚</p><p>å¼‚æ­¥åˆ›å»ºè¿›ç¨‹</p><p>spawnã€forkã€execã€execFileéƒ½éµå¾ªå¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½è¿”å›childProcesså®ä¾‹ã€‚</p><h2 id="æ–¹æ³•" tabindex="-1">æ–¹æ³•</h2><h3 id="exec-1" tabindex="-1">exec()</h3><p>è¯­æ³•ï¼š</p><div class="language-shell"><pre><code>options <span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span>
    cwd <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>URL<span class="token operator">&gt;</span> å­è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ã€‚ é»˜è®¤å€¼: process.cwd<span class="token punctuation">(</span><span class="token punctuation">)</span>ã€‚
    <span class="token function">env</span> <span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> ç¯å¢ƒå˜é‡é”®å€¼å¯¹ã€‚ é»˜è®¤å€¼: process.<wbr>envã€‚
    encoding <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token string">&#39;utf8&#39;</span>
    shell <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> ç”¨äºæ‰§è¡Œå‘½ä»¤çš„ shellã€‚ è¯·å‚é˜… shell çš„è¦æ±‚å’Œé»˜è®¤çš„ Windows shellã€‚ é»˜è®¤å€¼: Unix ä¸Šæ˜¯ <span class="token string">&#39;/bin/sh&#39;</span>ï¼ŒWindows ä¸Šæ˜¯ process.<wbr>env.ComSpecã€‚
    signal <span class="token operator">&lt;</span>AbortSignal<span class="token operator">&gt;</span> å…è®¸ä½¿ç”¨ä¸­æ­¢ä¿¡å·ä¸­æ­¢å­è¿›ç¨‹ã€‚
    <span class="token function">timeout</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token number">0</span>
    maxBuffer <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡†é”™è¯¯ä¸Šå…è®¸çš„æœ€å¤§æ•°æ®é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ å¦‚æœè¶…è¿‡ï¼Œåˆ™å­è¿›ç¨‹å°†ç»ˆæ­¢å¹¶æˆªæ–­ä»»ä½•è¾“å‡ºã€‚ è¯·å‚é˜… maxBuffer å’Œ Unicode çš„æ³¨æ„äº‹é¡¹ã€‚ é»˜è®¤å€¼: <span class="token number">1024</span> * <span class="token number">1024</span>ã€‚
    killSignal <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>integer<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token string">&#39;SIGTERM&#39;</span>
    uid <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> è®¾ç½®è¿›ç¨‹çš„ç”¨æˆ·æ ‡è¯†ï¼ˆå‚è§ setuid<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>ï¼‰ã€‚
    gid <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> è®¾ç½®è¿›ç¨‹çš„ç¾¤ç»„æ ‡è¯†ï¼ˆå‚è§ setgid<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>ï¼‰ã€‚
    windowsHide <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> éšè—é€šå¸¸åœ¨ Windows ç³»ç»Ÿä¸Šåˆ›å»ºçš„å­è¿›ç¨‹æ§åˆ¶å°çª—å£ã€‚ é»˜è®¤å€¼: falseã€‚
callback <span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span> å½“è¿›ç¨‹ç»ˆæ­¢æ—¶ä½¿ç”¨è¾“å‡ºè°ƒç”¨ã€‚
    error <span class="token operator">&lt;</span>Error<span class="token operator">&gt;</span>
    stdout <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>Buffer<span class="token operator">&gt;</span>
    stderr <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>Buffer<span class="token operator">&gt;</span>
è¿”å›: <span class="token operator">&lt;</span>ChildProcess<span class="token operator">&gt;</span>
</code></pre></div><p>è¡ç”Ÿ shellï¼Œç„¶ååœ¨è¯¥ shell ä¸­æ‰§è¡Œ commandï¼Œç¼“å†²ä»»ä½•ç”Ÿæˆçš„è¾“å‡ºã€‚ ä¼ ç»™æ‰§è¡Œå‡½æ•°çš„ command å­—ç¬¦ä¸²ç”± shell ç›´æ¥å¤„ç†ï¼Œ ç‰¹æ®Šå­—ç¬¦ï¼ˆå›  shell è€Œå¼‚ï¼‰éœ€è¦è¿›è¡Œç›¸åº”å¤„ç†ï¼š</p><div class="language-js"><pre><code><span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:util&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> exec <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;node:child_process&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;echo &quot;The \\$HOME variable is $HOME&quot;&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// $HOME å˜é‡åœ¨ç¬¬ä¸€ä¸ªå®ä¾‹ä¸­è¢«è½¬ä¹‰ï¼Œä½†åœ¨ç¬¬äºŒä¸ªå®ä¾‹ä¸­æ²¡æœ‰ã€‚</span>


<span class="token comment">/**
 * å›è°ƒæ¨¡å¼
 * ä½¿ç”¨åŒå¼•å·ï¼Œè¿™æ ·è·¯å¾„ä¸­çš„ç©ºæ ¼å°±ä¸ä¼šè¢«è§£é‡Šä¸ºå¤šä¸ªå‚æ•°çš„åˆ†éš”ç¬¦ã€‚
 */</span>
<span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;&quot;/path/to/test file/test.sh&quot; arg1 arg2&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> stdout<span class="token punctuation">,</span> stderr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">exec error: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>error<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">stdout: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stdout<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">stderr: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>stderr<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**
 * å¼‚æ­¥è½¬åŒæ­¥æ¨¡å¼
 * 
 å¦‚æœæ­¤æ–¹æ³•ä½œä¸ºå…¶ util.promisify() ç‰ˆæœ¬è¢«è°ƒç”¨ï¼Œåˆ™å…¶å°†ä¸ºå…·æœ‰ stdout å’Œ stderr å±æ€§çš„ Object 
 è¿”å› Promiseã€‚è¿”å›çš„ ChildProcess å®ä¾‹ä½œä¸º child å±æ€§é™„åŠ åˆ° Promiseã€‚ å¦‚æœå‡ºç°é”™è¯¯
 ï¼ˆåŒ…æ‹¬ä»»ä½•å¯¼è‡´é€€å‡ºç ä¸æ˜¯ 0 çš„é”™è¯¯ï¼‰,åˆ™å°†è¿”å›è¢«æ‹’ç»çš„ promise,å…¶å…·æœ‰ä¸å›è°ƒä¸­ç»™å®šç›¸åŒçš„ errorå¯¹è±¡ï¼Œ
 ä½†æœ‰ä¸¤ä¸ªé¢å¤–çš„å±æ€§ stdout å’Œ stderrã€‚
 */</span>
<span class="token keyword">const</span> _exec <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>exec<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">lsExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> stdout<span class="token punctuation">,</span> stderr <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">_exec</span><span class="token punctuation">(</span><span class="token string">&#39;ls&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;stdout:&#39;</span><span class="token punctuation">,</span> stdout<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;stderr:&#39;</span><span class="token punctuation">,</span> stderr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">lsExample</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**
 å¦‚æœå¯ç”¨äº† signal é€‰é¡¹ï¼Œåˆ™åœ¨ç›¸åº”çš„ AbortController ä¸Šè°ƒç”¨ .abort() ä¸åœ¨å­è¿›ç¨‹ä¸Šè°ƒç”¨
 .kill() ç±»ä¼¼ï¼Œåªæ˜¯ä¼ ç»™å›è°ƒçš„é”™è¯¯å°†æ˜¯ AbortErrorï¼š
 */</span>
<span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> signal <span class="token punctuation">}</span> <span class="token operator">=</span> controller<span class="token punctuation">;</span>
<span class="token keyword">const</span> child <span class="token operator">=</span> <span class="token function">exec</span><span class="token punctuation">(</span><span class="token string">&#39;grep ssh&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> signal <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä¸€ä¸ª AbortError</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœ timeout å¤§äº 0ï¼Œåˆ™å¦‚æœå­è¿›ç¨‹è¿è¡Œæ—¶é—´è¶…è¿‡ timeout æ¯«ç§’ï¼Œçˆ¶è¿›ç¨‹å°†å‘é€ç”± killSignal å±æ€§ï¼ˆé»˜è®¤ä¸º &#39;SIGTERM&#39;ï¼‰æ ‡è¯†çš„ä¿¡å·ã€‚</p><h3 id="execfile-1" tabindex="-1">.execFile()</h3><div class="language-shell"><pre><code><span class="token function">file</span> <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> è¦è¿è¡Œçš„å¯æ‰§è¡Œæ–‡ä»¶çš„åç§°æˆ–è·¯å¾„ã€‚
args <span class="token operator">&lt;</span>string<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span> å­—ç¬¦ä¸²å‚æ•°åˆ—è¡¨ã€‚
options <span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span>
    cwd <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>URL<span class="token operator">&gt;</span> å­è¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ã€‚
    <span class="token function">env</span> <span class="token operator">&lt;</span>Object<span class="token operator">&gt;</span> ç¯å¢ƒå˜é‡é”®å€¼å¯¹ã€‚ é»˜è®¤å€¼: process.<wbr>envã€‚
    encoding <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token string">&#39;utf8&#39;</span>
    <span class="token function">timeout</span> <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token number">0</span>
    maxBuffer <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> æ ‡å‡†è¾“å‡ºæˆ–æ ‡å‡†é”™è¯¯ä¸Šå…è®¸çš„æœ€å¤§æ•°æ®é‡ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚ å¦‚æœè¶…è¿‡ï¼Œåˆ™å­è¿›ç¨‹å°†ç»ˆæ­¢å¹¶æˆªæ–­ä»»ä½•è¾“å‡ºã€‚ è¯·å‚é˜… maxBuffer å’Œ Unicode çš„æ³¨æ„äº‹é¡¹ã€‚ é»˜è®¤å€¼: <span class="token number">1024</span> * <span class="token number">1024</span>ã€‚
    killSignal <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>integer<span class="token operator">&gt;</span> é»˜è®¤å€¼: <span class="token string">&#39;SIGTERM&#39;</span>
    uid <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> è®¾ç½®è¿›ç¨‹çš„ç”¨æˆ·æ ‡è¯†ï¼ˆå‚è§ setuid<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>ï¼‰ã€‚
    gid <span class="token operator">&lt;</span>number<span class="token operator">&gt;</span> è®¾ç½®è¿›ç¨‹çš„ç¾¤ç»„æ ‡è¯†ï¼ˆå‚è§ setgid<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>ï¼‰ã€‚
    windowsHide <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> éšè—é€šå¸¸åœ¨ Windows ç³»ç»Ÿä¸Šåˆ›å»ºçš„å­è¿›ç¨‹æ§åˆ¶å°çª—å£ã€‚ é»˜è®¤å€¼: falseã€‚
    windowsVerbatimArguments <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> åœ¨ Windows ä¸Šä¸ä¸ºå‚æ•°åŠ ä¸Šå¼•å·æˆ–è½¬ä¹‰ã€‚ åœ¨ Unix ä¸Šè¢«å¿½ç•¥ã€‚ é»˜è®¤å€¼: falseã€‚
    shell <span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> å¦‚æœæ˜¯ trueï¼Œåˆ™åœ¨ shell å†…è¿è¡Œ commandã€‚ åœ¨ Unix ä¸Šä½¿ç”¨ <span class="token string">&#39;/bin/sh&#39;</span>ï¼Œåœ¨ Windows ä¸Šä½¿ç”¨ process.<wbr>env.ComSpecã€‚ å¯ä»¥å°†ä¸åŒçš„ shell æŒ‡å®šä¸ºå­—ç¬¦ä¸²ã€‚ è¯·å‚é˜… shell çš„è¦æ±‚å’Œé»˜è®¤çš„ Windows shellã€‚ é»˜è®¤å€¼: <span class="token boolean">false</span> ï¼ˆæ²¡æœ‰ shellï¼‰
    signal <span class="token operator">&lt;</span>AbortSignal<span class="token operator">&gt;</span> å…è®¸ä½¿ç”¨ä¸­æ­¢ä¿¡å·ä¸­æ­¢å­è¿›ç¨‹ã€‚
callback <span class="token operator">&lt;</span>Function<span class="token operator">&gt;</span> è¿›ç¨‹ç»ˆæ­¢æ—¶ä½¿ç”¨è¾“å‡ºè°ƒç”¨ã€‚
    error <span class="token operator">&lt;</span>Error<span class="token operator">&gt;</span>
    stdout <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>Buffer<span class="token operator">&gt;</span>
    stderr <span class="token operator">&lt;</span>string<span class="token operator">&gt;</span> <span class="token operator">|</span> <span class="token operator">&lt;</span>Buffer<span class="token operator">&gt;</span>
è¿”å›: <span class="token operator">&lt;</span>ChildProcess<span class="token operator">&gt;</span>
</code></pre></div></div></div><footer class="page-footer" data-v-f058c2ee data-v-4d1950e8><div class="edit" data-v-4d1950e8><div class="edit-link" data-v-4d1950e8 data-v-d1f281aa><!----></div></div><div class="updated" data-v-4d1950e8><p class="last-updated" data-v-4d1950e8 data-v-01ad1c9a><span class="prefix" data-v-01ad1c9a>æœ€è¿‘æ›´æ–°æ—¶é—´:</span><span class="datetime" data-v-01ad1c9a></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"ideshortcutkey_webstorm.md\":\"18c6c91e\",\"about_index.md\":\"266d606d\",\"client_electron_base.md\":\"73b81831\",\"client_electron_index.md\":\"63ff8f07\",\"client_typescript_index.md\":\"2609fcb2\",\"client_css_æ»šåŠ¨æ¡.md\":\"704dd147\",\"client_javascript_xmlhttprequest.md\":\"ea195791\",\"client_javascript_base.md\":\"fd1f6794\",\"client_javascript_index.md\":\"eece4482\",\"client_javascript_å‡½æ•°.md\":\"bf6b65b9\",\"concat_index.md\":\"a782833f\",\"environmentconstruction_index.md\":\"b7b45d45\",\"environmentconstruction_linux.md\":\"491489b6\",\"environmentconstruction_mongodbç¦»çº¿å®‰è£….md\":\"9d0f7670\",\"environmentconstruction_mysqlç¦»çº¿å®‰è£….md\":\"a3088b54\",\"environmentconstruction_nginx.md\":\"f2832f95\",\"environmentconstruction_redisç¦»çº¿å®‰è£….md\":\"29fa9b75\",\"home_home.md\":\"38f1fc65\",\"index.md\":\"b65b705c\",\"interest_drug_index.md\":\"90a8b05a\",\"interest_music_index.md\":\"3981382e\",\"npmpackage_index.md\":\"93ce991e\",\"npmpackage_log4js.md\":\"6d781e35\",\"qdcz-note.md\":\"4557beaf\",\"service_linux_index.md\":\"a9464d28\",\"service_linux_linux.md\":\"4e8c9496\",\"service_linux_å­˜å‚¨å•ä½.md\":\"1e89b4f1\",\"service_mongodb_base.md\":\"6ca155d3\",\"service_mongodb_index.md\":\"4208220d\",\"service_mongodb_å»ºç«‹ttlç´¢å¼•.md\":\"53de734b\",\"service_nginx_index.md\":\"11980c9c\",\"service_nginx_windowç‰ˆæœ¬.md\":\"fe4f4779\",\"service_nodejs_base.md\":\"adf20931\",\"service_nodejs_buffer.md\":\"31afcf78\",\"service_nodejs_child_process.md\":\"2e9c372c\",\"service_nodejs_index.md\":\"6c6edbaf\",\"service_nodejs_process.md\":\"82deed28\",\"service_nodejs_stream.md\":\"18fec455\",\"service_nodejs_å·¥å…·å‡½æ•°.md\":\"0a5d610f\",\"service_nodejs_æ–‡ä»¶æè¿°ç¬¦.md\":\"d3c6d470\",\"service_nodejs_æ—¥å¿—ç³»ç»Ÿè®°å½•.md\":\"6aca9a07\",\"service_nodejs_æ··æ·†ç¼–è¯‘æ‰“åŒ….md\":\"33ae689f\",\"service_nodejs_é”.md\":\"6d1431a0\",\"service_koa_index.md\":\"8c028d04\",\"service_koa_æ´‹è‘±æ¨¡å‹.md\":\"26a07483\",\"softwareengineering_é¢å‘å¯¹è±¡ç¼–ç¨‹.md\":\"7d674901\",\"temporary_index.md\":\"5a23302e\",\"temporary_recentplan.md\":\"4a33a5c9\",\"temporary_websocketforauthbynodejs.md\":\"2ff12679\",\"temporary_work_day_work_report.md\":\"b2cedae0\",\"temporary_work_todayplan.md\":\"b7eb1c2b\",\"temporary_work_weekly_work_report.md\":\"26f025a0\",\"windowsystem_cmdå‘½ä»¤.md\":\"e4ff76d1\",\"windowsystem_index.md\":\"ef9c447f\",\"windowsystem_åˆ›å»ºæœ¬åœ°å…±äº«æ–‡ä»¶å¤¹.md\":\"76d9012b\"}")</script>
    <script type="module" async src="/assets/app.f3070ad9.js"></script>
    
  </body>
</html>